var CON_VERSION = {
	release:'2015.12.18_024708',
	dir:	'nt6.1.6.0',
	script:	'2015.07.09',
	ntid:	'2015.07.09',
	im: 	'2015.07.09',
	chat:	'2015.07.09',
	publish:'2015.10.26_000000'
};
var CON_RULE = {};
var CON_SERVER = {
	flashserver:'http://downt.ntalker.com/t2d/'
};

/* @file nt1.js
 * @date 2015.10.20 18:20:07 
 */
(function(i){var J,z=[],y={},t=i.location,j=i.document,r=i.navigator,s=[],P=s.slice,Q={}.hasOwnProperty,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,S=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,T=/[\-\+0-9\.]/ig,U=/-([a-z])/ig,V=/(<.*?>)/ig,c=function(a,b){return new c.fn.init(a,b,J)},A=!1;c.fn=c.prototype={talkVersion:"2015.01.17",constructor:c,init:function(a,b,d){var e;if(!a)return this;if("string"===typeof a){if((e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:R.exec(a))&&(e[1]||!b)){if(e[1])b=
b instanceof c?b[0]:b,c.merge(this,c.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:j,!0));else{if((b=j.getElementById(e[2]))&&b.parentNode)this.length=1,this[0]=b;this.context=j;this.selector=a}return this}return!b||b.talkVersion?(b||d).find(a):this.constructor(b).find(a)}if(a.nodeType||c.isWindow(a))return this.context=this[0]=a,this.length=1,this;if(c.isObject(a)&&a.talkVersion)return a.length&&(this.context=this[0]=a[0],this.length=1),this;if(c.isPlainObject(a))return b=a.tag||"div",delete a.tag,
this.context=this[0]=c.Element(b,a),this.length=1,this;if(c.isFunction(a))return c.ready(a);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return c.merge(this,[a])},selector:"",length:0,toArray:function(){return P.call(this)},get:function(a){return null===a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){a=c.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},eq:function(a){var b=this.length,a=+a+(0>a?b:0);return this.pushStack(0<=
a&&a<b?[this[a]]:[])},first:function(){return this.eq(0)},last:function(){return this.eq(this.length-1)},each:function(a,b){return c.each(this,a,b)},find:function(a){a=this.constructor.selector.query(a,this);return this.pushStack(a)},push:s.push,sort:[].sort,splice:[].splice};c.fn.init.prototype=c.fn;c.extend=c.fn.extend=function(){var a,b,d,e,f=arguments[0]||{},g=1,h=arguments.length,k=!1;"boolean"===typeof f&&(k=f,f=arguments[1]||{},g=2);"object"!==typeof f&&!c.isFunction(f)&&(f={});h===g&&(f=this,
--g);for(;g<h;g++)if(a=arguments[g])for(var m in a)a.hasOwnProperty(m)&&(b=f[m],d=a[m],f!==d&&(k&&d&&(c.isPlainObject(d)||(e=c.isArray(d)))?(e?(e=!1,b=b&&c.isArray(b)?b:[]):b=b&&c.isPlainObject(b)?b:{},f[m]=c.extend(k,b,d)):void 0!==d&&(f[m]=d)));return f};c.extend({CON_CACHE_COOKIE:"nTalk_CACHE_DATA",CON_MANAGE_COOKIE:"nTalk_PAGE_MANAGE",CON_PCID_KEY:"NTKF_T2D_CLIENTID",CON_CONNECT_FLASH:"FLASH",CON_CONNECT_COMET:"COMET",STYLE_BODY:"margin:0;padding:0;border:none;float:none;width:auto;height:auto;clear:none;clip:auto;position:static;left:auto;top:auto;right:auto;bottom:auto;font:normal normal normal 12px/160% Arial,SimSun;text-align:left;box-sizing:content-box;color:#000;background-color:transparent;",
STYLE_NBODY:"margin:0;padding:0;border:none;float:none;width:auto;height:auto;clear:none;clip:auto;position:static;left:auto;top:auto;right:auto;bottom:auto;font:normal normal normal 0px/0px Arial,SimSun;text-align:left;box-sizing:content-box;color:#000;background-color:transparent;",isReady:!1,Log:new Function,charset:j.charset||j.characterSet,language:r.language||r.systemLanguage,protocol:t.protocol,url:t.href,title:j.title,referrer:j.referrer,source:"",domain:"",baseProtocol:"",baseURI:"",sourceURI:"",
baseName:"",baseExt:"",extParmas:{},pageURI:"",pageName:"",params:null,hashParams:null,user:{},lang:null,server:null,global:{},IMPRESENCE:null,version:{pub:"2015.01.17"},elementParent:null,elementBefore:null,isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isBoolean:function(a){return"boolean"===typeof a},isDefined:function(a){return"undefined"!==typeof a},isWindow:function(a){return a&&a==a.window},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},
isArray:function(a){return c.isFunction(Array.isArray)?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)&&a&&!this.isDefined(a.nodeType)},isEmptyObject:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},isPlainObject:function(a){if("object"!==typeof a||a.nodeType||this.isWindow(a))return!1;try{if(a.constructor&&!Q.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},
getWindow:function(a){return c.isWindow(a)?a:9===a.nodeType&&a.defaultView},bind:function(a,b){var d=Array.prototype.slice.call(arguments).slice(2);return function(e){return b.apply(a,[e||i.event].concat(d))}},parseHTML:function(a,b){if(!a||"string"!==typeof a)return null;var b=b||j,d=S.exec(a);return d?[b.createElement(d[1])]:/<|&#?\w+;/.test(a)?(d=b.createElement("div"),d.innerHTML=a,c.merge([],d.childNodes)):[b.createTextNode(a)]},merge:function(){var a=arguments[0]||{},b=arguments,d,e,c;if(1>=
b.length)return a;for(d=1;d<b.length;d++)if(b[d]&&null!==b[d])if(void 0===b[d].length)for(e in b[d])b[d].hasOwnProperty(e)&&(a[e]=b[d][e]);else{e=0;for(c=b[d].length;e<c;e++)void 0!==a.length?a.push(b[d][e]):a[e]=b[d][e]}return a},each:function(a,b,d){c.isArray(d)||(d=[]);if(c.isArray(a)||c.isObject(a)&&a.talkVersion)for(var e=0;e<a.length&&!1!==b.apply(a[e],[e,a[e++]].concat(d)););else if(c.isObject(a))for(e in a)a.hasOwnProperty(e)&&b.apply(a[e],[e,a[e]].concat(d));else b.apply(a,[0,a].concat(d));
return a},access:function(a,b,d,e,f){var g=0,h=a.length;if(c.isPlainObject(d)){var f=!0,k;for(k in d)d.hasOwnProperty(k)&&c.access(a,b,k,d[k],!0)}else if(void 0!==e)for(f=!0;g<h;g++)b(a[g],d,e);return f?a:h?b(a[0],d):null},strFormat:function(a,b){for(var d="",e=1,c=b||2;e<=c;e++)d+="0";d+=a||"";return d.substr(d.length-c)},getTime:function(a){var b=(new Date).getTime(),d=1E3*Math.random(),d=this.strFormat(Math.floor(d),3);switch(a){case 2:return b.toString()+d;case 1:return b+d;default:return b}},
secondsToMinutes:function(a){var b="",d=this.strFormat;60<=a?(b+=d(Math.floor(a/60)),a%=60):b+="00";return b+":"+d(a)},formatDate:function(a,b){var d,e;this.isNumeric(a)?d=new Date(a):"string"==typeof a?(d=new Date,b=a):d=new Date;b=b||"HH:mm:ss";e={"M+":d.getMonth()+1,"d+":d.getDate(),"h+":0==d.getHours()%12?12:d.getHours()%12,"H+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"q+":Math.floor((d.getMonth()+3)/3),"S+":d.getMilliseconds()};/(y+)/i.test(b)&&(b=b.replace(RegExp.$1,(d.getFullYear()+
"").substr(4-RegExp.$1.length)));for(var c in e)e.hasOwnProperty(c)&&RegExp("("+c+")").test(b)&&(b="S"==RegExp.$1?b.replace(RegExp.$1,("00"+e[c]).substr(3)):b.replace(RegExp.$1,1==RegExp.$1.length?e[c]:("00"+e[c]).substr((""+e[c]).length)));return b},randomChar:function(a,b){for(var d="",e=a||8,c=10==b?"0123456789":"0123456789ABCDEF",g=0;g<e;g++)d+=c.charAt(Math.ceil(1E8*Math.random())%c.length);return d}});c.selector={tagGuid:1,attrMap:{"class":"className","for":"htmlFor"},rex:{R_RULE:/[ +>~]/g,
NR_RULE:/[^ +>~]+/g,TRIM_LR:/^ +| +$/g,TRIM_ALL:/ *([ +>~,]) */g,PSEU_PARAM:/\([^()]+\)/g,ATTR_PARAM:/[^\[]+(?=])/g,ATTR:/=|!=|\^=|\$=|\*=|~=|\|=/,CLS:/\./g,PSEU:/[^:]+/g,NUM:/\d+/,NTH:/(-?\d*)n([+-]?\d*)/,RULES:/((?:#.+)*)([a-zA-Z1-6*]*)([^\[:]*)((?:\[.+])*)((?::.+)*)/},query:function(a,b){if("undefined"==typeof a||!a)return[];var d=[],e,c,g,h,k,m,i;switch(typeof b){case "undefined":c=[j];break;case "string":a=b+" "+a;c=[j];break;case "object":c=b.nodeType?[b]:b}e=this.format(a);b=c;h=0;for(k=e.length;h<
k;h++){a=e[h];g=(" "+a).match(this.rex.R_RULE);a=a.match(this.rex.NR_RULE);c=b;m=0;for(i=g.length;m<i;m++)c=this.parse(a[m],c,g[m]);d=d.concat(c)}return 1<k?this.makeDiff(d):d},format:function(a){var b=[],d=[];this.pseuParams=b;this.attrParams=d;for(a=a.replace(this.rex.TRIM_LR,"").replace(this.rex.TRIM_ALL,"$1").replace(this.rex.ATTR_PARAM,function(a){return d.push(a)-1});-1!==a.indexOf("(");)a=a.replace(this.rex.PSEU_PARAM,function(a){return b.push(a.substring(1,a.length-1))-1});return a.split(",")},
parse:function(a,b,d){var e,a=this.rex.RULES.exec(a);if(e=a[1])return(e=j.getElementById(e.substring(1)))?[e]:[];b=c.selector.queryRelative[d](b,a[2]||"*",this);if(d=a[3])b=this.filterClass(b,d.replace(this.rex.CLS,""));if(d=a[4])b=this.filterAttr(b,this.getAttrRules(d.match(this.rex.ATTR_PARAM),this.attrParams));if(a=a[5])b=this.filterPseudo(b,this.getPseudoRules(a.match(this.rex.PSEU),this.pseuParams));return b},getRules:function(a){var b,a=this.rex.RULES.exec(a);a[2]||(a[2]="*");a[3]=a[3].replace(this.rex.CLS,
"");if(b=a[4])a[4]=this.getAttrRules(b.match(this.rex.ATTR_PARAM),this.attrParams);if(b=a[5])a[5]=this.getPseudoRules(b.match(this.rex.PSEU),this.pseuParams);return a},getAttrRules:function(a,b){for(var d=[],e=a.length,f=this.rex.ATTR,g=0,h,k;g<e;g++)h=b[a[g]],k=h.match(f)||" ",h=h.split(f),d.push(c.selector.queryAttrs[k]),d.push(h);return d},getPseudoRules:function(a,b){for(var d=[],e=0,f=a.length,g=this.tagGuid++,h,k,m;e<f;e++){h=a[e];if(this.rex.NUM.test(h))switch(k=b[RegExp["$&"]],h=RegExp["$`"],
h){case "nth-child":if(this.rex.NTH.test("odd"===k&&"2n+1"||"even"===k&&"2n"||k)){if(k=RegExp.$1,k=""===k?1:"-"===k?-1:k,k=[g,!0,k,RegExp.$2],1===k[2]&&0===k[3])continue}else k=[g,!1,k];break;case "not":m=k.split(",");for(k=[];m.length;)k.push(this.getRules(m.pop()))}d.push(c.selector.queryPseudos[h]);d.push(k)}return d},filterPseudo:function(a,b){for(var d=a.length,e=0,c=b.length,g=[],h,k,m,i;e<d;e++){k=a[e];for(h=0;h<c&&!(m=b[h],i=b[h+1],!m||!m(k,i,this));h+=2);h===c&&g.push(k)}return g},filterAttr:function(a,
b){for(var d=a.length,e=0,c=b.length,g=[],h,k,m,i,j,l;e<d;e++){k=a[e];for(h=0;h<c;h+=2){i=b[h];m=b[h+1];l=m[0];if(!(j=k.getAttribute(l)))if(!(j=k[this.attrMap[l]||l]))break;if(!i(j+"",m[1]))break}h===c&&g.push(k)}return g},filterClass:function(a,b){for(var d=0,e=a.length,c=[],g,h;d<e;d++)h=a[d],"string"==typeof h.className&&(g=h.className,g=RegExp(g.replace(" ","|"),"g"),b.replace(g,"")||c.push(h));return c},filterEl:function(a,b,d,e,c){return"*"!==b&&a.nodeName.toLowerCase()!==b||d&&!this.filterClass([a],
d).length||e&&!this.filterAttr([a],e).length?!1:!(c&&!this.filterPseudo([a],c).length)},makeDiff:function(a){for(var b=this.tagGuid++,d=a.length,c=[],f=0,g,h;f<d;f++)g=a[f],h=this.getElData(g),h.tagGuid!==b&&(c.push(g),h.tagGuid=b);return c},getElData:function(a){var b=a.mojoExpando;b||(b=a.mojoExpando={mQuery:{tagGuid:0}});if(!(b=b.mQuery))b={tagGuid:0};return b},queryRelative:{" ":function(a,b,d){for(var c=d.tagGuid++,f=a.length,g=[],h=0,k,m,i;h<f;h++){k=a[h];if(m=k.parentNode){if(d.getElData(m).tagGuid===
c)continue;d.getElData(k).tagGuid=c}i=k.getElementsByTagName(b)||null;k=0;for(m=i.length;k<m;k++)g.push(i[k])}return g},">":function(a,b){for(var d=[],c=a.length,f=0,g;f<c;f++)for(g=a[f].firstChild;g;)1===g.nodeType&&(g.nodeName.toLowerCase()===b||"*"===b)&&d.push(g),g=g.nextSibling;return d},"+":function(a,b){for(var d=[],c=a.length,f=0,g;f<c;f++)for(g=a[f];g=g.nextSibling;)if(1===g.nodeType){(g.nodeName.toLowerCase()===b||"*"===b)&&d.push(g);break}return d},"~":function(a,b,d){for(var c=d.tagGuid++,
f=a.length,g=[],h=0,k,i;h<f;h++){k=a[h];if(i=k.parentNode){if((i=d.getElData(i)).tagGuid===c)continue;i.tagGuid=c}for(;k=k.nextSibling;)1===k.nodeType&&(k.nodeName.toLowerCase()===b||"*"===b)&&g.push(k)}return g}},queryAttrs:{" ":function(){return!0},"=":function(a,b){return a===b},"!=":function(a,b){return a!==b},"^=":function(a,b){return 0===a.indexOf(b)},"$=":function(a,b){return a.substring(a.length-b.length)===b},"*=":function(a,b){return-1!==a.indexOf(b)},"~=":function(a,b){return-1!==(" "+
a+" ").indexOf(" "+b+" ")},"|=":function(a,b){return a===b||a.substring(0,b.length+1)===b+"-"}},queryPseudos:{eq:function(a,b,d){var c,f,g;if((c=a.parentNode)&&(g=d.getElData(c)).tagGuid!==b){c=c.firstChild;for(f=1;c;)1===c.nodeType&&(d.getElData(c).nodeIndex=f++),c=c.nextSibling;g.tagGuid=b}return d.getElData(a).nodeIndex==b},lt:function(a,b,d){var c,f,g;if((c=a.parentNode)&&(g=d.getElData(c)).tagGuid!==b){c=c.firstChild;for(f=1;c;)1===c.nodeType&&(d.getElData(c).nodeIndex=f++),c=c.nextSibling;g.tagGuid=
b}return d.getElData(a).nodeIndex<b},gt:function(a,b,d){var c,f,g;if((c=a.parentNode)&&(g=d.getElData(c)).tagGuid!==b){c=c.firstChild;for(f=1;c;)1===c.nodeType&&(d.getElData(c).nodeIndex=f++),c=c.nextSibling;g.tagGuid=b}return d.getElData(a).nodeIndex>b},"first-child":function(a){for(;a=a.previousSibling;)if(1===a.nodeType)return!1;return!0},"last-child":function(a){for(;a=a.nextSibling;)if(1===a.nodeType)return!1;return!0},"only-child":function(a){for(var b=a.nextSibling,a=a.previousSibling;b;){if(1===
b.nodeType)return!1;b=b.nextSibling}for(;a;){if(1===a.nodeType)return!1;a=a.previousSibling}return!0},"nth-child":function(a,b,d){var c,f,g;if((c=a.parentNode)&&(g=d.getElData(c)).tagGuid!==b[0]){c=c.firstChild;for(f=1;c;)1===c.nodeType&&(d.getElData(c).nodeIndex=f++),c=c.nextSibling;g.tagGuid=b[0]}a=d.getElData(a).nodeIndex;return b[1]?(a-=b[3],b=b[2],0<=a*b&&0===a%b):a===b[2]},not:function(a,b,d){for(var c=0,f=b.length,g;c<f;c++){g=b[c];if(g[1]){if("#"+a.id!==g[1])continue;return!1}if(d.filterEl(a,
g[2],g[3],g[4],g[5]))return!1}return!0},contains:function(a,b){return-1<(a.textContent||a.innerText||"").indexOf(b)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},empty:function(a){return!a.firstChild}}};c.Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};c.extend({initializeCore:function(){var a=/([^\.]+(\.com(\.cn)?|\.net(\.cn)?|\.org(\.cn)?|\.gov(\.cn)?|\.cn|\.mobi|\.tel|\.asia|\.me|\.info|\.hk|\.cc|\.biz|\.tv))$/i.exec(j.domain),
b=/(.*\/)(.*?\.\w+)?([\?#].*)?$/ig.exec(t.protocol+"//"+j.domain+t.pathname);J=c(j);c("script[src*=ntkf],script[src*=base.out]").each(function(a,b){if(b.src){var d=/^((https?:).*\/)?(.*?\.js)?(\?.*)?/ig.exec(b.src);d&&(d[1]&&d[3]&&/^((ntkfstat|ntkf|base\.out).*?)\.js/gi.test(d[3]))&&(c.baseProtocol=d[2]||c.protocol,c.baseURI=d[1]||c.pageURI,c.baseName=d[3],c.baseExt=d[4]?d[4]:"",c.elementParent=b.parentNode,c.elementBefore=b)}});if(!c.baseURI)throw"get script url failure";c.domain=a&&a[0]||j.domain;
c.pageURI=b&&b[1]?b[1]:"";c.pageName=b&&b[2]?b[2]:"";c.params=c.uriToJSON(t.search.substr(1));c.hash=t.hash?t.href.substr(t.href.indexOf("#")+1):"";c.hashParams=c.uriToJSON(c.hash);c.loadList=y;c.global.connect=c.flash.support&&!c.browser.mobile?c.CON_CONNECT_FLASH:c.CON_CONNECT_COMET;if(c.browser.msie6)try{j.execCommand("BackgroundImageCache",!1,!0)}catch(d){}for(var a=c.baseExt.length?c.baseExt.substr(1).split("&"):["lan=zh_cn",""],e=0;e<a.length;e++)b=a[e].split("="),c.extParmas[b[0]]="lan"==b[0]?
b[1]||"zh_cn":b[1];c.cache.init()}});var s=c,u=r.userAgent.toLowerCase(),l={"360ee":!1,lbbrowser:!1,se:!1,chrome:!1,safari:!1,msie:!1,firefox:!1,oupeng:!1,opera:!1,webkit:!1,iPod:!1,iPad:!1,iPhone:!1,android:!1,gecko:!1,windows:!1,"windows ce":!1},p=["applewebkit/([^\\s]*)","presto\\/([\\d.]*)","trident([^;]*)","gecko\\/([\\d.]*)","msie ([\\d.]*)"];c.each(l,function(a){l[a]=-1<u.indexOf(a.toLowerCase())});l.ua=u;l.ieversion=0;l.coreversion=0;l.mac=!!u.match(/cpu.+mac\s+os\s+x/g);for(var v=0;v<p.length;v++)RegExp(p[v],
"i").test(u)&&(v==p.length-1?l.ieversion=+(RegExp.$1||RegExp.$2):l.coreversion=+RegExp.$1);l.ieversion=j.documentMode||l.ieversion||l.ieversion;l.msie=l.msie||0<l.ieversion;l.gecko=l.gecko&&!l.webkit&&!l.msie;l.msie6=l.msie&&6==l.ieversion;l.msie7=l.msie&&7==l.ieversion;l.msie8=l.msie&&8==l.ieversion;l.msie9=l.msie&&9==l.ieversion;l.msie10=l.msie&&10==l.ieversion;l.msie11=l.msie&&11==l.ieversion;l.oldmsie=l.ieversion&&9>=l.ieversion;l.safari=l.safari&&!l.chrome;l.safari2=l.safari&&!/adobeair/i.test(u);
l.Quirks="BackCompat"===j.compatMode;l.mobile=/mobile|android|linux/i.test(u);l.iOS="Mac68K"==r.platform||"MacPPC"==r.platform||"Macintosh"==r.platform||-1<u.indexOf("mac");l.is=function(a){return RegExp(a,"ig").test(u)};l.html5=!!i.applicationCache;s.browser=l;c.extend({ready:function(a){var b=this,d=j.readyState,e=c.browser.webkit&&525>c.browser.version,f=function(){if(!A){!e&&i.removeEventListener&&(j.removeEventListener("DOMContentLoaded",f,!1),i.removeEventListener("load",f,!1));c.isReady=A=
!0;for(var a=0;a<z.length;a++)z[a].apply(j);z=[]}};A||/loaded|complete/gi.test(d)?(c.isReady=A=!0,a.call(b)):z[z.length]=function(){return a.call(b)};if(e)(function(){/^loaded|complete$/i.test(d)?f():setTimeout(arguments.callee(),50)})();else if(j.addEventListener)"interactive"==d?f():(j.addEventListener("DOMContentLoaded",f,!1),i.addEventListener("load",f,!1));else{var g=j.createElement("div");(function(){(function(){try{g.doScroll("left"),j.body.insertBefore(g,j.body.lastChild).setAttribute("html",
"temp")}catch(a){}return g})?f():setTimeout(arguments.callee(),50)})()}},require:function(a,b,d){var e=[],f=[],g,h=null,k,i;a&&(a="string"===typeof a?[a]:a,b=b||new Function,d=d||j.head||c("head")[0]||j.documentElement,k=c._getObjectNumber(a),0===e.length&&0===k&&b.apply(h,f),c.each(a,function(a,j){if(j){var l,K=c.getTime(),W=-1==j.indexOf("?")?"?":"&",w=j.replace(/(.*\/)?(.*?)[\?$](.*)?/i,"$2"),q=!c.isNumeric(a)?a:"",n=function(){e.splice(c.inArray(j,e),1);k--;0===e.length&&0===k&&b.apply(h,f)},
p=function(a){var a=c.Event.fixEvent(a),b=a.currentTarget||a.srcElement,d=/loaded|complete/gi,e=b.readyState;"load"===a.type||d.test(e)?setTimeout(function(){q?(y[w]=c[q],f.push(c[q])):(y[w]=b,f.push(b));n()},c.browser.msie6?500:0):"error"===a.type&&(a.error=!0,f.push(q?!1:a),n())};e.push(j);w+=-1<j.indexOf("#rnd")?String(K).substring(5,11):-1<j.indexOf("#image")?j.replace(/(.*?)\?(.*?)(#.*?)?$/gi,"-$2"):"";l=/\.((gif)|(png)|(jpg)|(bmp)|(jpeg))$/i.test(j)||/#image$/ig.test(j);j=j.replace(/#rnd/i,
W+"ts="+K).replace(/#image/i,"");i=(!/^(https?:\/\/)/i.test(j)?c.baseURI:"")+j;q&&c[q]?(f.push(c[q]),n()):!q&&y[w]?(f.push(y[w]),n()):l?h=c.preloadImage(i,function(a){a.error=!1;y[w]=a;f.push(a);n()},function(a){a.error=!0;f.push(a);n()}):(g=/\.css[^\.]*$/gi.test(j)?{tag:"link",type:"text/css",rel:"stylesheet",href:i}:{tag:"script",type:"text/javascript",async:"async",charset:"utf-8",src:i},"script"==g.tag&&q&&(g["data-requiremodule"]=q),h=c(g).appendTo(d),"undefined"==typeof h.get(0).onreadystatechange?
h.bind("load",p).bind("error",p):h.bind("readystatechange",p).bind("error",p))}}))},jsonp:function(a,b){var d,e="call_"+c.randomChar(16),a=a+(/\?/ig.test(a)?"&":"?")+"callback="+e;i[e]=function(){d=arguments;setTimeout(function(){c.isFunction(b)&&b.apply(self,d)},0);try{delete i[e]}catch(a){}};c.require(a,function(a){c(a.error?a.target:this).remove()})},preloadImage:function(a,b,d){var b=b||new Function,d=d||new Function,e,f=new Image;f.src=a;if(f.complete)return b.call(c,f),f;f.onload=function(){clearInterval(e);
b.call(c,this)};f.onError=function(){clearInterval(e);d.call(c,this)};e=setInterval(function(){if("complete"==f.readyState||c.browser.msie7)clearInterval(e),f.onLoad=f.onError=null,b.call(c,f)},5);return f},_getObjectNumber:function(a){if(a){if(c.isArray(a))return a.length;var b=0,d;for(d in a)a.hasOwnProperty(d)&&b++;return b}return!1}});c.cookie={enable:function(){var a=!1;if(r.cookieEnabled)return!0;this.set("testcookie","yes",0);"yes"==this.get("testcookie")&&(a=!0);this.del("testcookie");return a},
set:function(a,b,d,e){var f,b=b||"",e=e?e:c.domain;"number"!=typeof d&&(d=0);0===d?d=c.browser.msie||c.browser.mobile?" ":"expires=0; ":(f=new Date,f.setTime(f.getTime()+d),d=f?"expires="+f.toGMTString()+"; ":"");e="domain="+e+"; ";a=a+"="+(""+b).replace(/\"|\'/gi,"|")+"; ";j.cookie=a+d+e+"path=/; ";return b},get:function(a){var b=j.cookie;return b.length&&(a=RegExp("(?:^|;)\\s*"+a+"=(.*?)(?:;|$)").exec(b))&&a.length?decodeURIComponent(a[1].replace(/\|/gi,'"')):null},del:function(a,b){return this.set(a,
"",1,b)}};c.flash=function(){function a(a){var b=f,a=(a||"0.0.0").split(".").slice(0,3);return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>a[2]}var b,d,e=!1,f=[0,0,0,0];if(r.plugins&&r.mimeTypes.length)(b=r.plugins["Shockwave Flash"])&&b.version?(e=!0,f=b.version.split(".")):b&&b.description&&(e=!0,f=b.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),3==f.length&&(f[f.length]=0));else if(c.browser["windows ce"]){b=1;for(d=3;b;)try{d++,b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+
d),e=!0,f=[d,0,0]}catch(g){b=null}}else try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),null!==b&&(e=!0,f=b.GetVariable("$version").split(" ")[1].toString().replace(/,/g,".").split("."))}catch(h){e=!1}return{remove:function(a){c(a).each(function(a,b){var d;if(c.browser.msie||!b.parentNode){for(d in b)try{eval("element."+d+"=null")}catch(e){}d=j.createElement("DIV");try{d.appendChild(b),d.innerHTML="",d.parentNode&&d.parentNode.removeChild(d)}catch(f){}}else try{b.parentNode.removeChild(b)}catch(g){c.Log("remove flash node failure",
3)}})},GT:a,support:(0===f.join(".").indexOf("11.6.602")||0===f.join(".").indexOf("11.3.300")||!a("10.3"))&&c.browser.firefox||c.browser.mac?!1:e,version:f.join(".")}}();var L=function(a){return a===i?"theWindow":a===j?"theDocument":a.uniqueID},M=function(a){return function(b){var d=b.relatedTarget,c;if(!(c=this==d))if(this==d)c=!1;else{for(;d&&d!=this;)d=d.parentNode;c=d==this}c||a.call(this,b)}},X=function(){this.cancelBubble=!0},Y=function(){this.returnValue=!1},B=[];i.addEventListener?(s=function(a,
b,d,c){"mouseenter"==b?a.addEventListener("mouseover",M(d),c):"mouseleave"==b?a.addEventListener("mouseout",M(d),c):a.addEventListener(b,d,c)},p=function(a,b,d,c){a.removeEventListener(b,d,c)}):(s=function(a,b,d){var c="{FNKEY::obj_"+L(a)+"::evt_"+b+"::fn_"+d+"}",f=B[c];"undefined"==typeof f&&(f=function(b){d.call(a,b)},B[c]=f,a.attachEvent("on"+b,f),i.attachEvent("onunload",function(){try{a.detachEvent("on"+b,f)}catch(d){}}),c=null)},p=function(a,b,d){var d="{FNKEY::obj_"+L(a)+"::evt_"+b+"::fn_"+
d+"}",c=B[d];"undefined"!=typeof c&&(a.detachEvent("on"+b,c),delete B[d])});c.Event={__evtHash:B,addEvent:s,removeEvent:p,fixEvent:function(a){if(a&&a.target)return a;a=a||i.event;a.pageX=a.clientX+c(i).scrollLeft();a.pageY=a.clientY+c(i).scrollTop();a.target=a.srcElement;a.stopPropagation=X;a.preventDefault=Y;switch(a.type){case "mouseout":a.relatedTarget=a.toElement;break;case "mouseover":a.relatedTarget=a.fromElement}return a},fireEvent:function(a,b){if(c.browser.msie)try{a.fireEvent("on"+b)}catch(d){return!1}else{var e=
j.createEvent("HTMLEvents");e.initEvent(b,!0,!0);try{a&&a.dispatchEvent(e)}catch(f){}}return!0}};c.JSON=function(){function a(a){h.lastIndex=0;return h.test(a)?'"'+a.replace(h,function(a){var b=k[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(c,g){var h,k,i,j,l,q=d,n=g[c];"function"===typeof f&&(n=f.call(g,c,n));switch(typeof n){case "string":return a(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);
case "object":if(!n)return"null";d+=e;l=[];if("[object Array]"===Object.prototype.toString.apply(n)){j=n.length;for(h=0;h<j;h+=1)l[h]=b(h,n)||"null";i=0===l.length?"[]":d?"[\n"+d+l.join(",\n"+d)+"\n"+q+"]":"["+l.join(",")+"]";d=q;return i}if(f&&"object"===typeof f){j=f.length;for(h=0;h<j;h+=1)k=f[h],"string"===typeof k&&(i=b(k,n))&&l.push(a(k)+(d?": ":":")+i)}else for(k in n)n.hasOwnProperty(k)&&(i=b(k,n))&&l.push(a(k)+(d?": ":":")+i);i=0===l.length?"{}":d?"{\n"+d+l.join(",\n"+d)+"\n"+q+"}":"{"+l.join(",")+
"}";d=q;return i}}var d,e,f,g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return{toJSONString:function(a,d){if(d&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("JSON.toString");return b("",{"":a})},
parseJSON:function(a,b){function d(a,c){var e,f=a[c];if(f&&"object"===typeof f)for(var g in f)f.hasOwnProperty(g)&&(e=d(f,g),void 0!==e?f[g]=e:delete f[g]);return b.call(a,c,f)}var e;if(a=String(a).replace(/\r|\n/ig,""))try{a=c.hexToDec(a)}catch(f){}g.lastIndex=0;g.test(a)&&(a=a.replace(g,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?d({"":e},""):e;throw new SyntaxError("JSON.toJSON");}}}();c.HASH=c.Class.create();c.HASH.prototype={hashTable:null,hashIndex:null,initialize:function(){this.hashTable={};this.hashIndex=[]},add:function(a,b){if("undefined"===typeof a||this.contains(a))return!1;this.hashTable[a]="undefined"!==typeof b?b:null;this.hashIndex.push(a);return!0},remove:function(a){var b=this.next(a),d=this.index(a);delete this.hashTable[a];
!1!==d&&this.hashIndex.splice(d,1);return this.hashTable[b]},first:function(){for(var a in this.hashTable)if(this.hashTable.hasOwnProperty(a))return this.hashTable[a]},last:function(){var a=null,b;for(b in this.hashTable)this.hashTable.hasOwnProperty(b)&&(a=this.hashTable[b]);return a},previous:function(a){var b=null,d;for(d in this.hashTable)if(this.hashTable.hasOwnProperty(d)){if(d==a)break;b=d}return b},next:function(a){var b=null,d=!1,c;for(c in this.hashTable)if(this.hashTable.hasOwnProperty(c))if(b||
(b=c),c==a)d=!0;else if(d)return c;return b},count:function(){var a=0,b;for(b in this.hashTable)this.hashTable.hasOwnProperty(b)&&a++;return a},items:function(a,b){b&&(this.hashTable[a]=b);return this.hashTable[a]},index:function(a){for(var b=0;b<this.hashIndex.length;b++)if(this.hashIndex[b]==a)return b;return!1},contains:function(a){return"undefined"!=typeof this.hashTable[a]},clear:function(){for(var a in this.hashTable)this.hashTable.hasOwnProperty(a)&&delete this.hashTable[a];this.hashIndex=
[]},each:function(a){for(var b in this.hashTable)b&&this.hashTable.hasOwnProperty(b)&&a.call(self,b,this.hashTable[b])}};c.POST=c.Class.create();c.POST.prototype={iframeName:"",iframeElement:null,formName:"",formElement:null,target:"",CON_TARGET:["_blank","_self","_parent","_top"],_stopCall:!1,onComplete:null,onFailure:null,_loaded:!1,initialize:function(a,b,d,e){var b=c.merge({},b),f=c.randomChar(16);c.isArray(d)?(this.onComplete=d[0]||new Function,this.onFailure=d[1]||new Function):(this.onComplete=
d||new Function,this.onFailure=new Function);this.target=e||"POST_IFRAME_"+f;0>c.inArray(this.target,this.CON_TARGET)&&(this.iframeName=this.target,this.iframeElement=this.createIFrame(this.iframeName,"about:blank"));this.formName="POST_FORM_"+f;this.formElement=this.form(a,b);try{this.formElement.submit()}catch(g){}},stopCall:function(){this._stopCall=!0},createIFrame:function(a,b){var d=this,e,f=function(b){var e=this;/^(?:loaded|complete|undefined)$/.test(e.readyState)&&!d._loaded&&(c(e).removeEvent("readystatechange",
f),c(e).removeEvent("load",f),c(e).removeEvent("error",g),d._loaded=!0,d._stopCall||d.onComplete.call(d,b,a),i.frames[a]=i[a]=null,setTimeout(function(){c(e).remove();c(d.formElement).remove()},800))},g=function(b){var e=this;c(e).removeEvent("readystatechange",f);c(e).removeEvent("load",f);c(e).removeEvent("error",g);d._stopCall||d.onFailure.call(d,b,a);i.frames[a]=i[a]=null;setTimeout(function(){c(e).remove();c(d.formElement).remove()},50)};if(i[a])return i[a];if(i.frames[a])return i.frames[a];
e=c({tag:"IFRAME",name:a,id:a,src:b,style:"left:-10px;top:-10px;visibility:hidden;width:1px;height:1px;"}).appendTo(!0);c.browser.safari||e.css("position","absolute");e.bind("readystatechange",f).bind("load",f).bind("error",g);i[a]=e.get(0);return i[a]},form:function(a,b){var d;d=c({tag:"FORM",name:this.formName,"accept-charset":"utf-8",enctype:"application/x-www-form-urlencoded",method:"POST",style:"display:none;",target:this.target,action:a}).appendTo(!0);if(c.isArray(b))for(var e=0;e<b.length;e++)for(var f in b[e])b[e].hasOwnProperty(f)&&
this.input(f+"[]",b[e][f],d);else for(e in b)if(b.hasOwnProperty(e))if(c.isArray(b[e]))for(f=0;f<b[e].length;f++)this.input(e+"[]",b[e][f],d);else this.input(e,b[e],d);return d.get(0)},input:function(a,b,d){return c({tag:"INPUT",type:"hidden",name:a,value:encodeURIComponent(/number|string/.test(typeof b)?b:c.JSON.toJSONString(b))}).appendTo(d)}};c.extend({inArray:function(a,b){if("undefined"==b.length)for(var d in b){if(b.hasOwnProperty(d)&&b[d]==a)return d}else{d=0;for(var c=b.length;d<c;d++)if(b[d]==
a)return d}return-1},toURI:function(a,b,d){var e=[],f=void 0===d?"&":d,d=function(d,e){var h="&"==f?d+"=":"";switch(typeof a[g]){case "object":return e?h+encodeURIComponent(c.JSON.toJSONString(e)):b?"":h;case "function":case "undefined":return"";case "boolean":case "number":return h+e;default:return e?h+encodeURIComponent(e.replace(/\+/gi,"%2B")):b?"":h}};if(c.isPlainObject(a))for(var g in a){if(a.hasOwnProperty(g)){var h=d(g,a[g]);h&&e.push(h)}}else return"";return e.join(f).replace(/%20/g,"+")},
uriToJSON:function(a){for(var b={},a=a.toString().split("&"),d,c=0;c<a.length;c++)if(d=a[c].split("="),!(2>d.length))try{b[d[0]]=decodeURIComponent(d[1]||"")}catch(f){b[d[0]]=d[1]}return b},whereGetTo:function(a,b,d,e){return c.merge(a,this.whereGet(b,d,e))},whereGet:function(a,b,d,e){var f={};if(b&&c.isArray(b))for(var g=0,h=b.length;g<h;g++)d&&d[g]&&d[g]!==b[g]?f[d[g]]=!c.isDefined(a[b[g]])?"":a[b[g]]:f[b[g]]=!c.isDefined(a[b[g]])?"":a[b[g]];else f=a;if(!c.isFunction(e))return f;for(var i in f)f.hasOwnProperty(i)&&
e.call(this,f[i])},enLength:function(a){try{return(a||"").toString().replace(/[^\x00-\xFF]/g,"**").length}catch(b){c.Log(b,3)}},enCut:function(a,b,d){var e=c.enLength(a),b=b||0;if(e<b)return""+(a||"");for(var f=e=0;f<a.length;f++){e+=255<a.charCodeAt(f)?2:1;if(e==b||d&&e==b-2)return a.substring(0,f+1)+(d?"..":"");if(e>b||d&&e>b-2)return a.substring(0,f)+(d?"..":"")}return a||""},camelize:function(a){return a.replace("-ms-","ms-").replace(U,function(a,d){return(d+"").toUpperCase()})},clearHtml:function(a){return a.replace(V,
"")},protocolFilter:function(a,b){b=b||c.protocol;"file:"==b&&(b="http:");if(c.isObject(a)){for(var d in a)a.hasOwnProperty(d)&&(a[d]=this.protocolFilter(a[d],b));return a}if(c.isNumeric(a)||c.isBoolean(a)||c.isFunction(a))return a;if("undefined"!==typeof a)return a.toString().replace(/^https?:/ig,b)},decToHex:function(a){for(var b=[],d=0;d<a.length;d++)b[d]=/[\u4e00-\u9fa5]/i.test(a.charAt(d))?"\\u"+("00"+a.charCodeAt(d).toString(16)).slice(-4):a.charAt(d);return b.join("")},hexToDec:function(a){if(!a)return"";
var b=a.match(/\\u([0-9a-zA-Z]{2,4})|&#(\d+);/gi);if(b)for(var d=0;d<=b.length;d++)if(b[d]){var c,f=!1;c=b[d].replace("\\u","");for(var g=0;g<c.length;g++)-1=="0123456789abcdef".indexOf(c.charAt(g))&&(f=!0);f||(c=String.fromCharCode(parseInt(c,16)),a=a.replace(b[d],c))}return a}});c.extend({Element:function(a,b){var d,e,f="",a=a.toLocaleUpperCase();if(-1<c.inArray(a,["IFRAME","FORM","INPUT","SELECT","TEXTAREA"]))try{"FORM"==a&&(f=(b.method?' method="'+b.method+'"':"")+(b.enctype?' enctype="'+b.enctype+
'"':"")),e="<"+a+' name="'+(b.name||c.randomChar(16))+'"'+f+"></"+a+">",d=j.createElement(e),delete b.name}catch(g){d=j.createElement(a)}else d="comment"===a?j.createComment(b.text||""):j.createElement(a);b&&c.each(b,function(a,b){try{switch(a){case "css":case "style":d.style.cssText=b;break;case "innerHTML":case "html":d.innerHTML=b;break;case "className":case "class":d.className=b;break;case "text":d.textContent=b;break;default:d.setAttribute(a,b)}}catch(c){}});return d},insert:function(a,b,d){var c,
a=a||j.body,d=d?d.toLowerCase():"afterbegin";if(a.insertAdjacentHTML)switch(d.toLowerCase()){case "beforebegin":return a.insertAdjacentHTML("BeforeBegin",b),a.previousSibling;case "afterbegin":return a.insertAdjacentHTML("AfterBegin",b),a.firstChild;case "afterend":return a.insertAdjacentHTML("AfterEnd",b),a.nextSibling;default:return a.insertAdjacentHTML("BeforeEnd",b),a.lastChild}c=a.ownerDocument.createRange();switch(d){case "beforebegin":return c.setStartBefore(a),b=c.createContextualFragment(b),
a.parentNode.insertBefore(b,a),a.previousSibling;case "afterbegin":return a.firstChild?(c.setStartBefore(a.firstChild),b=c.createContextualFragment(b),a.insertBefore(b,a.firstChild)):a.innerHTML=b,a.firstChild;case "beforeend":return a.lastChild?(c.setStartAfter(a.lastChild),b=c.createContextualFragment(b),a.appendChild(b)):a.innerHTML=b,a.lastChild;case "afterend":return c.setStartAfter(a),b=c.createContextualFragment(b),a.parentNode.insertBefore(b,a.nextSibling),a.nextSibling}throw'Illegal insertion point -> "'+
d+'"';},flashHtml:function(a,b,d,e){e=c.extend({width:1,height:1,style:"",wmode:"opaque"},e);c.browser.oldmsie&&(b+="&rnd="+Math.floor(1E3*Math.random()));return c.browser.msie&&11>c.browser.ieversion?['<object id="',a,'" name="',a,'" width="',e.width,'" height="',e.height,'" style="',e.style,'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28"><param name="wmode" value="',e.wmode,'" /><param name="movie" value="',
b,'" /><param name="allowscriptaccess" value="always" /><param name="flashvars" value="',c.toURI(d,!0),'" /></object>'].join(""):c.browser.msie&&11<=c.browser.ieversion?['<object id="',a,'"  name="',a,'" data="',b,'" width="',e.width,'" height="',e.height,'" style="',e.style,'" type="application/x-shockwave-flash"><param name="wmode" value="',e.wmode,'"/><param name="movie" value="',b,'"/><param name="quality" value="high"/><param name="allowscriptaccess" value="always"/><param name="flashvars" value="',
c.toURI(d,!0),'"/></object>'].join(""):['<embed id="',a,'" name="',a,'" src="'+b+'" width="',e.width,'" height="',e.height,'" style="',e.style,'" flashvars="',c.toURI(d,!0),'" wmode="',e.wmode,'" allowscriptaccess="always" pluginspage="https://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" ></embed>'].join("")},_vendorPropName:function(a,b){if(b in a)return b;for(var d=["Webkit","O","Moz","ms"],c=b.charAt(0).toUpperCase()+b.slice(1),f=b,g=d.length;g--;)if(b=d[g]+c,b in
a)return b;return f},css:function(a,b,d){var e=/\s*alpha\(opacity=([^)]*)\)\s*/gi;if(!a)return!1;if(void 0===d){d=c.camelize(b);if(j.defaultView&&j.defaultView.getComputedStyle)return d=j.defaultView.getComputedStyle(a,null).getPropertyValue(b),"auto"===d||""===d?0:d;b=c.cssProps[d]||c._vendorPropName(a.style,d);d="opacity"===b?/opacity=([^)]*)/.test(a.currentStyle.filter)?0.01*parseFloat(RegExp.$1)+"":1:a.style[b]||(a.currentStyle?a.currentStyle[b]:null);"backgroundPosition"===b&&(c.browser.msie&&
8>=c.browser.ieversion)&&(d=a.style[b+"X"]||(a.currentStyle?a.currentStyle[b+"X"]:null),d=d+" "+a.style[b+"Y"]||(a.currentStyle?a.currentStyle[b+"Y"]:null));return"auto"===d?0:d}if(void 0!==j.documentElement.style.opacity)try{a.style[c.camelize(b)]=d}catch(f){return!1}else{if(!a.currentStyle||!a.currentStyle.hasLayout)a.style.zoom=1;if("opacity"===b){try{a.style.filter=1==d?"none":(a.currentStyle||a.style).filter.replace(e,"")+" alpha(opacity="+100*d+")"}catch(g){}a.style.zoom=1}else try{a.style[c.camelize(b)]=
d}catch(h){return!1}}return!0},attr:function(a,b,d){if(a)return"undefined"!=typeof d?(""===d?a.removeAttribute(b):a.setAttribute(b,d),d):a.getAttribute(b)},addClass:function(a,b){if(!a||this.indexOfClass(a,b))return!1;var d=a.className.split(/\s+/).join(" ");a.className=(d?d+" ":"")+b;return!0},removeClass:function(a,b){if(!a||!a.className)return!1;a.className=a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)","i")," ");return!0},indexOfClass:function(a,b){return!a||!a.className?!1:RegExp("(^|\\b)"+
b+"(\\s|$)","gi").test(a.className)},contains:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1}});c.position=c.Class.create();c.position.prototype={defaultOptions:{left:null,top:null,width:null,height:null,right:null,bottom:null,fixed:!0,resize:!1},timer:0,repwidth:"",repheight:"",inited:!1,direction:"left",initialize:function(a,b){var d;c.extend(this,this.defaultOptions,b);this.element=a.talkVersion?a:c(a);this.width?"auto"==this.width&&(this.repwidth="auto",this.width=this.element.width()):
this.width=this.element.width();this.height?"auto"==this.height&&(this.repheight="auto",this.height=this.element.height()):this.height=this.element.height();this.offset=c(i).offset();this.quirks=c.browser.msie6||c.browser.Quirks&&c.browser.oldmsie;null===this.left&&(this.direction="right");null===this.left&&null===this.right&&(d=this.element.offset(),this.left=d.left,this.top=d.top);this.right=null===this.right?c(i).width()-this.left-this.width:this.right;this.bottom=null===this.bottom?c(i).height()-
this.top-this.height:this.bottom;this.left=null===this.left?c(i).width()-this.right-this.width:this.left;this.top=null===this.top?c(i).height()-this.bottom-this.height:this.top;this.fixed?this.fixedPosition({left:this.left,top:this.top,right:this.right,bottom:this.bottom}):this.animationPosition()},fixedPosition:function(a){var b=this,d,e;this.quirks?(d=c(i).offset(),e=c(i).scrollTop(),this.element.css({position:"absolute",width:this.repwidth?this.repwidth:this.width+"px",height:this.repheight?this.repheight:
this.height+"px",left:a.left+d.left+"px",top:a.top+d.top+"px"}),d=["expression(eval(Math.max((document.documentElement.scrollLeft || document.body.scrollLeft), (document.documentElement.scrollLeft || document.body.scrollLeft) + "+a.left+")))","expression(eval(Math.max((document.documentElement.scrollLeft || document.body.scrollLeft), (document.documentElement.scrollLeft || document.body.scrollLeft) + (document.documentElement.clientWidth  || document.body.clientWidth ) - this.offsetWidth  - "+a.right+
")))"],a=["expression(eval(Math.max((document.documentElement.scrollTop  || document.body.scrollTop ), (document.documentElement.scrollTop  || document.body.scrollTop ) + "+a.top+")))","expression(eval(Math.max((document.documentElement.scrollTop  || document.body.scrollTop ), (document.documentElement.scrollTop  || document.body.scrollTop ) + (document.documentElement.clientHeight || document.body.clientHeight) - this.offsetHeight - "+a.bottom+")))"],c.isFunction(this.element.get(0).style.getExpression)?
"left"==this.direction?(this.element.Expression("left",d[0]),this.element.Expression("top",a[0])):(this.element.Expression("left",d[1]),this.element.Expression("top",a[1])):(c(i).scrollTop(e+1),"left"==this.direction?this.element.replaceIEcssText({left:d[0],top:a[0]}):this.element.replaceIEcssText({left:d[1],top:a[1]}),c(i).scrollTop(e))):(d={position:"fixed",width:this.repwidth?this.repwidth:this.width+"px",height:this.repheight?this.repheight:this.height+"px"},"left"==this.direction?(d.left=a.left+
"px",d.top=a.top+"px"):(d.right=a.right+"px",d.bottom=a.bottom+"px"),this.element.css(d));this.resize&&!this.inited&&c.Event.addEvent(i,"resize",function(a){b.resizeFixed(a)});this.inited=!0},resizeFixed:function(){var a=[];if("left"==this.direction)a.left=Math.max(0,Math.min(this.left,c(i).width()-this.width)),a.top=Math.max(0,Math.min(this.top,c(i).height()-this.height)),a.right=c(i).width()-a.left-this.width,a.bottom=c(i).height()-a.top-this.height;else if(a.right=Math.min(this.right,c(i).width()-
this.width),a.bottom=Math.min(this.bottom,c(i).height()-this.height),a.left=c(i).width()-a.right-this.width,a.top=c(i).height()-a.bottom-this.height,0>a.left||0>a.top)a.left=Math.max(0,a.left),a.top=Math.max(0,a.top),a.right=c(i).width()-a.left-this.width,a.bottom=c(i).height()-a.top-this.height;this.fixedPosition(a)},clearExpression:function(){if(this.quirks){var a=c(i).offset();this.element.Expression("left","");this.element.Expression("top","");this.element.css({left:this.left+a.left+"px",top:this.top+
a.top+"px"})}},animationPosition:function(){}};c.extend({myString:function(a){a=new String(""+a);a.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};a.linkFilter=function(a){return this.toString().replace(/((\w+):\/\/)?([\w-]+\.)([\w-]+\.)([a-zA-Z\-_\.]+)([^$\s,\"\u4E00-\u9FA5]*)?/ig,function(d,c,f,g,h,i,j){return'<a href="'+((c||"http://")+(g||"")+h+i+(j||"")).replace(/(^\s+)|(\s+$)/gi,"")+'" target="_blank" style="'+(a||"")+'">'+(c||"")+(g||"")+h+i+(j||"")+"</a>"})};a.sprintf=function(){var a=
arguments.length,d=this;if(1>a||!RegExp)return d.toString();for(var c=0;c<a;c++)d=d.replace(RegExp("%"+(c+1),"g"),(arguments[c]+"").replace(/%\d/g,"").toString());return d};return a},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},unit:function(a,b){if(this.cssNumber[a])return"";var d=(b+"").replace(T,"");return""===d?"px":d},valHooks:{option:{get:function(a){return a.value||a.text}},select:{get:function(a){var b,d,e=
a.selectedIndex,f=[],g=a.options,h="select-one"===a.type;if(0>e)return null;a=h?e:0;for(d=h?e+1:g.length;a<d;a++)if(b=g[a],b.selected&&null===b.getAttribute("disabled")&&!b.parentNode.disabled&&"OPTGROUP"!==b.parentNode.tagName.toUpperCase()){b=c(b).val();if(h)return b;f.push(b)}return h&&!f.length&&g.length?c(g[e]).val():f},set:function(a,b){var d=c.isArray(b)?b:[b];c(a).find("option").each(function(){this.selected=0<=c.inArray(c(this).val(),d)});d.length||(a.selectedIndex=-1);return d}}}});c.each(["radio",
"checkbox"],function(a,b){c.valHooks[b]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});c.each(["radio","checkbox"],function(a,b){c.valHooks[b]=c.extend(c.valHooks[b],{set:function(a,b){a.checked=0<=c.inArray(c(a).val(),b);return a.checked}})});c.fn.extend({bind:function(a,b){return c.access(this,function(a,b,f){c.Event.addEvent(a,b,f)},a,b,1)},addEvent:function(a,b){return this.bind(a,b)},click:function(a){return this.bind("click",a)},hover:function(a,b){return c.access(this,
function(a,b,f){c.Event.addEvent(a,"mouseover",b);c.Event.addEvent(a,"mouseout",f);return c(a)},a,b||new Function)},removeEvent:function(a,b){return c.access(this,function(a,b,f){c.Event.removeEvent(a,b,f)},a,b,1)},insert:function(a,b){return c(c.insert(this[0],a,b))},html:function(a,b){return void 0!==a?c.each(this,function(b,c){c.innerHTML=a}):c.isBoolean(b)&&b?(this.length?this.get(0).innerHTML:"").replace(/(^\s+)|(\s+$)/gi,""):this.length?this.get(0).innerHTML:""},append:function(a){return c.each(this,
function(b,d){c.insert(d,a,"beforeend")})},appendTo:function(a,b){var d,e=j.body||c("body")[0]||j.documentElement;"boolean"==typeof a&&(b=a,a=null);d=!a||"string"==typeof a?c(a||e)[0]:a.talkVersion?a.length?a[0]:c(e)[0]:a;return c.each(this,function(a,e){var h=d.tagName.toLocaleUpperCase();if(b&&b.talkVersion&&b.length)return d.insertBefore(e,b.get(0));if(b&&1==b.nodeType)return d.insertBefore(e,b);if(!0===b)return d.insertBefore(e,d.firstChild);if(A||"BODY"!=h)try{return d.appendChild(e)}catch(i){}else return c.insert(d,
e.outerHTML,"beforeend")})},replace:function(a){c.each(this,function(b,d){if(d.replaceNode)d.replaceNode(a);else try{d.parentNode.appendChild(a),d.parentNode.removeChild(d)}catch(c){}});return c(a)},find:function(a){a=this.constructor.selector.query(a,this);return this.pushStack(a)},parent:function(a){var b=this.get(0),a=a||1;if(!b||!b.parentNode||!this.length)return null;for(;0<a&&b.parentNode&&11!==b.parentNode.nodeType;)b=b.parentNode,a--;return b?c(b):null},child:function(){return this.find("*")},
remove:function(){return c.each(this,function(a,b){var d=!1,e;for(e in b)if("IFRAME"!=b.tagName.toUpperCase())try{"function"===typeof b[e]&&(b[e]=null)}catch(f){c.Log("remove("+b.tagName+"):"+f.message,3)}if(b.parentNode)try{b.parentNode.removeChild(b),d=!0}catch(g){}if(!d){d=j.createElement("DIV");try{d.appendChild(b),d.innerHTML="",d.parentNode&&d.parentNode.removeChild(d)}catch(h){}}})},css:function(a,b){return c.access(this,function(a,b,f){return void 0!==f?c.css(a,b,f):c.css(a,b)},a,b,1<arguments.length)},
cssText:function(a){return c.access(this,function(a,c,e){return void 0!==e?a.style.cssText=e:a.style.cssText},"",a,1<arguments.length)},attr:function(a,b){return c.access(this,function(a,b,f){return void 0!==f?c.attr(a,b,f):c.attr(a,b)},a,b,1<arguments.length)},display:function(a){return c.each(this,function(b,d){c.css(d,"display",a?"block":"none")})},replaceIEcssText:function(a,b){return c.access(this,function(a,b,c){var g=";"+a.style.cssText,h=RegExp(";\\s*"+b+":\\s*(.*?);","ig"),b=";"+b+":"+(c||
"")+";";a.style.cssText=h.test(g)?g.replace(h,b):g+b},a,b,1<arguments.length)},Expression:function(a,b){return c.access(this,function(a,b,c){if("getExpression"in a.style)return void 0===c?a.style.getExpression(b):""===c?a.style.removeExpression(b):a.style.setExpression(b,c)},a,b,1<arguments.length)},curClass:function(){return this.length?this.get(0).className:""},addClass:function(a){return c.each(this,function(b,d){c.addClass(d,a)})},removeClass:function(a){return c.each(this,function(b,d){c.removeClass(d,
a)})},indexOfClass:function(a){return c.indexOfClass(this[0],a)},replaceClass:function(a,b){return c.each(this,function(d,e){c.addClass(e,a);c.removeClass(e,b)})},val:function(a){if(!this.length)return"";var b,d,e;e=this[0];if(arguments.length)return c.each(this,function(d,e){null===a&&(a="");b=c.valHooks[e.type]||c.valHooks[e.nodeName.toLowerCase()];if(!b||!("set"in b)||void 0===b.set(this,a,"value"))e.value=a});if((b=c.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(d=b.get(e,"value")))return d;
if((b=c.valHooks[e.type])&&"get"in b){e="radio"==this[0].type;for(var f=[],g=0;g<this.length;g++)if(void 0!==(d=b.get(this[g],"value"))&&this[g].checked){if(e)return d;f.push(d)}return e?"":f}d=this[0].value;return"string"===typeof d?d:null===d?"":d},width:function(a){var b;if(0<this.length)b=this[0];else return 0;return c.isWindow(b)?c.browser.Quirks&&!c.browser.msie?j.documentElement.clientWidth:j.documentElement.clientWidth||j.body.clientWidth||i.innerWidth:void 0===a?b.offsetWidth:b.offsetWidth=
a},height:function(a){var b;if(this.length)b=this[0];else return 0;return c.isWindow(b)?c.browser.Quirks&&!c.browser.msie?i.innerHeight:j.documentElement.clientHeight||j.body.clientHeight||i.innerHeight:void 0===a?b.offsetHeight:b.offsetHeight=a},scrollHeight:function(a){var b;if(this.length)b=this[0];else return 0;if(c.isWindow(b))return i.innerHeight||j.documentElement.scrollHeight||j.body.scrollHeight;try{return void 0===a?b.scrollHeight:b.scrollHeight=a}catch(d){return 0}},scrollLeft:function(a){var b;
if(this.length)b=this[0];else return 0;if(c.isWindow(b))if(void 0===a)try{return Math.max(j.documentElement.scrollLeft||i.pageXOffset,j.body?j.body.scrollLeft:0)||0}catch(d){return 0}else j.documentElement.scrollLeft=a,j.body.scrollLeft=a;else return void 0===a?b.scrollLeft:b.scrollLeft=a},scrollTop:function(a){var b;if(this.length)b=this[0];else return 0;if(c.isWindow(b)){if(void 0===a)return j.documentElement.scrollTop||i.pageYOffset||j.body.scrollTop;j.documentElement.scrollTop=a;j.documentElement.scrollTop!=
a&&(j.body.scrollTop=a)}else return void 0===a?b.scrollTop:b.scrollTop=a},offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b,d){c.offset.setOffset(d,a,b)});var b,d=this[0],e={top:0,left:0};b=d&&d.ownerDocument;if(c.isWindow(d))return{top:c(d).scrollTop(),left:c(d).scrollLeft()};if(!b)return e;b=b.documentElement;if(!c.contains(b,d))return e;"undefined"!==typeof d.getBoundingClientRect&&(e=d.getBoundingClientRect());return{top:e.top+c(i).scrollTop()-b.clientTop,left:e.left+
c(i).scrollLeft()-b.clientLeft}},fixed:function(a){return c.each(this,function(b,d){new c.position(d,a)})}});c.offset={setOffset:function(a,b){var d,e,f;d=c.css(a,"position");var g=c(a),h={};"static"===d&&(a.style.position="relative");e=g.offset();d=c.css(a,"top");f=c.css(a,"left");null!==b.top&&(h.top=b.top-e.top+(d||0));null!==b.left&&(h.left=b.left-e.left+(f||0));g.css(h)}};c.cache={data:null,init:function(){c.cache.data=c.extend({},c.cache.deserialize(c.cookie.get(c.CON_CACHE_COOKIE)))},get:function(a,
b){!0===b&&(c.cache.data=c.merge(c.cache.data,c.cache.serialize(c.cookie.get(c.CON_CACHE_COOKIE))));return this.formatData(a)},set:function(a,b){this.formatData(a,b);return c.cookie.set(c.CON_CACHE_COOKIE,c.cache.serialize(c.cache.data),0)},serialize:function(a){var b=this,d=[];if(c.isArray(a)){for(var e=0;e<a.length;e++)d.push(this.serialize(a[e]));return"["+d.join("|")+"]"}return c.isObject(a)?(c.each(a,function(a,c){d.push(a+":"+b.serialize(c))}),d.length?"{"+d.join(",")+"}":"{}"):a},deserialize:function(a){if(!a)return{};
var b,a=/"/.test(a)?a:a.replace(/(\{|\[)/g,'$1"').replace(/(}|])/g,'"$1').replace(/(:|,)/g,'"$1"');try{b=eval("("+a+")")}catch(d){return null}for(var e in b)b.hasOwnProperty(e)&&(b[e]=c.isNumeric(b[e])?+b[e]:b[e]);return b},formatData:function(a,b){for(var d=a.split("."),e=c.cache.data,f;f=d.shift();)if(0<d.length)e[f]||(e[f]={}),e=e[f];else{if(void 0===b)return e[f]||null;if(c.isArray(b)){var g=[];e[f]&&(g=g.concat(e[f]));e[f]=g.concat(b)}else return e[f]=b,c.cache.data}}};var s=c,p=function(){F=
!0;100>c.getTime()-N||(N=c.getTime(),G&&O(),c.isFunction(c.promptwindow.callbackFocus)&&c.promptwindow.callbackFocus())},v=function(){F=!1;c.isFunction(c.promptwindow.callbackBlur)&&c.promptwindow.callbackBlur()},Z=function(){D++;j.title=0===D%2?x:H;try{top!=self&&(top.document.title=0===D%2?x:H)}catch(a){}},O=function(){if(E&&(clearInterval(I),I=null,D=0,setTimeout(function(){j.title=C},500),E=!1,i.top!=i.self))try{i.top.document.title=C}catch(a){}},F=!1,E=!1,N=c.getTime(),I=null,H=null,x=null,C=
j.title,D=0,G=!0;i.addEvent&&(c(j).bind("focusin",p),c(j).bind("focusout",v));c(i).bind("focus",p);c(i).bind("blur",v);p={callbackFocus:new Function,callbackBlur:new Function,originTitle:C,startPrompt:function(a,b,d){if(!E&&!F){if(b&&0<b.length){H=c.myString("\u3010%1\u3011%2 - %3").sprintf(b,"",C);x="";for(var e=0,b=Math.ceil(c.enLength(b)/2);e<b;e++)x+="\u3000";x=c.myString("\u3010%1\u3011%2 - %3").sprintf(x,a,C)}G=d||G;I=setInterval(Z,800);return E=!0}},stopPrompt:O};s.promptwindow=p;i.nTalk||
(i.nTalk=i.NTKF=c,c.initializeCore())})(window);

/* @file flashserver
 * @date 2015.12.18 02:47:08
 */
(function($){
	$.flashserver = {
		'trailserver':'http://trail.ntalker.com:443/trail/trail',
		'presenceserver':'rtmp://bim1.ntalker.com:8000/flashIM;rtmps://bim1.ntalker.com:443/flashIM',
		'presencegoserver':'http://bim1.ntalker.com/flashIM/wdkstatus',
		'crmcenter':'http://bcrmct.ntalker.com/',
		'mcenter':'http://bmct6.ntalker.com/',
		'coopserver':'',
		'roboturl':'',
		't2dstatus':'http://bt2d1.ntalker.com/t2d/t2dstatus',
		'chatview_in':'',
		'chatview_out':'',
		'chatview_wap':'',
		'queryurl':'http://spider.ntalker.com:8080/spider/',
		'isnoim':2,
		'notrail':0,
		'preload':2000,
		'sessioncarry':'1',
		'enable_entrance':'0',
		'enable_invite':'0',
		'close_tchat_flash':'1',
		'close_im_flash':'0',
		'robot':'0',
		'connect_type':'mqtt',
		'siteid':'kf_9823'
	};
	$.sourceURI = $.baseURI + "siteid/respack_nt6.1.6.0/";
})(nTalk);

/* @file trail.js
 * @date 2015.10.20 18:20:13 
 */
(function(a){a.trail||(a.trail={_trailServer:{kf_9988:"http://trailsvc.ntalker.com/trailsvc/count/trail.php?"},islogin:!1,called:!1,etype:"pv",edata:"",start:function(b,e){var c=this,d,f;d=a.referrer&&-1<a.referrer.indexOf(a.domain);this.called||(a.Log("nTalk.trail.start()",1),this.etype=e?"update":this.etype,this.islogin=b||""===a.global.trailid||!d?1:0,d=this.formartData(),!a.isEmptyObject(a.global.ntalkerparam)&&a.global.ntalkerparam&&(f=a.extend({},{ntalkerparam:a.global.ntalkerparam})),a.each(d,
function(b,d){c.request(c.formatURI()+a.toURI(d),f,function(b){a.Log(b,1)},b)}),this.called=!0)},request:function(b,e,c,d){e&&e.hasOwnProperty("ntalkerparam")&&!a.isEmptyObject(e.ntalkerparam)?(a.Log("POST request URI:"+b),new a.POST(b,e,function(a,b){c.call(nTalk,"nTalk.trail: iframe["+b+"] post complete.",1)},"POST_IFRAME_"+d)):(a.Log("POST request URI:"+b),a.require(b,function(){c.call(nTalk,"nTalk.trail: script get complete.",1)}))},formatURI:function(){return this._trailServer[a.global.siteid]?
a.protocolFilter(this._trailServer[a.global.siteid]):a.protocolFilter(a.server.trailserver+"/userinfo.php?")},formartData:function(){var b=[],e,c={action:"save",url:a.url,siteid:a.global.siteid,uid:a.user.id,uname:a.user.name,device:a.browser.mobile?"WAP":"PC",isvip:a.global.isvip,userlevel:a.global.userlevel,cid:a.global.pcid,sid:a.global.trailid,log:this.islogin,pageid:a.base.pageid,etype:this.etype,edata:this.edata};a.global.pagetype&&(c.url=-1==a.url.indexOf("#")?c.url+("#ntalker-pagetype="+a.global.pagetype):
-1==a.url.indexOf("?")?a.url.replace(/#/i,"?ntalker-pagetype="+a.global.pagetype+"#"):a.url.replace(/#/i,"&ntalker-pagetype="+a.global.pagetype+"#"));1==this.islogin&&(a.cache.set("tid",a.global.trailid),c=a.merge(c,{lan:a.language,scr:screen.width+"*"+screen.height,cookie:a.cookie.enable()?1:0,flash:a.flash.version}));a.Log("nTalk.trail: "+(this.islogin?"LOGIN":"LINK")+" trailid:"+a.global.trailid+", uid:"+a.user.id+", pcid:"+a.global.pcid,this.islogin?1:0);a.global.orderid.length?a.each(a.global.orderid,
function(d,f){e=d>a.global.orderprice.length-1?"":a.global.orderprice[d];b.push(a.merge({},c,{orderid:f,orderprice:e,sellerid:a.global.sellerid[d]||"",ttl:a.title,ref:a.referrer}))}):b.push(a.merge({},c,{sellerid:a.global.sellerid.length?a.global.sellerid[0]:"",ttl:a.title,ref:a.referrer}));return b}})})(nTalk);

/* @file base.js
 * @date 2015.10.20 18:19:38 
 */
(function(a){var k=["kf_9933","kf_9949","kf_9954"],l={trailserver:"",presenceserver:"",presencegoserver:"",crmcenter:"",mcenter:"",coopserver:"",roboturl:"",t2dstatus:"",isnoim:0,notrail:0,preload:2E3,sessioncarry:"1",enable_entrance:"0",enable_invite:"0",close_tchat_flash:"1",close_im_flash:"0",robot:"0",siteid:""};if(a.baseURI&&!a.base){a.extend({CON_LOAD_MODE_NID:1,CON_CUSTOMER_ID:0,CON_GROUP_ID:1,CON_VISITOR_ID:2,CON_SHORT_ID:3});a.base={_startBase:!1,_identityIDReady:!1,_connectTimeID:null,chatLoading:!1,
clearChatCache:!1,timeOut:2E3,entityList:{"<":"&lt;",">":"&gt;"},fieldList:"shortid uid uname isvip userlevel itemid itemparam erpparam exparams".split(" "),CON_LOCAL_FIX:"NOWAIT_",userIdFix:"",_get_page_data:null,__page_data:null,config:null,start:function(){if(a.server){if(a.Log("nTalk.base.start()",1),a.global.pageinchat=!0,a.global.statictis=2,a.source=a.url,this._identityIDReady=!1,!this._startBase)if(this.pageid=a.getTime(),!1===this.getPageData())a.Log("NTKF_PARAM no define",3);else{this._loadFlashServer();
this._startBase=!0;var b=this;this._loadIdentityID(function(d,c){a.Log("PCID:"+c,1);b.startOtherMode(d,c)})}}else a.Log("Loaded $server mode failed",3)},startTrail:function(){a.Log("start call trail service");a.require({trail:"trail.js"+a.baseExt},function(b){b?a.trail.start(a.base._islogin,!1):a.Log("Loaded $trail mode failed",3)})},startIM:function(){(!a.im||!a.im.connect)&&a.require({im:"im.js"+a.baseExt},function(b){b?a.im.start():a.Log("Loaded $im mode failed",3)})},startLCrm:function(b,d,c){var e=
b&&a.isArray(b)?b:[b];a.require({lcrm:"lcrm.js"+a.baseExt},function(){a.each(e,function(b,e){a.Log("start lcrm mode",1);a.lcrm.start(e,d,c)})})},startChat:function(b,d,c,e,f,g,h){var j,b=b||"",d=d||"",c=c||"",e=e||"",f=f||"";a.im&&a.im.hideTips();!0===a.base.chatLoading?a.Log("loading......",2):(a.Log("$.base.startChat("+a.JSON.toJSONString(arguments)+")",1),a.base.showLoading(),j={lang:(a.extParmas.lan||"zh_cn")+".js"+a.baseExt,chatManage:"chat.in.js"+a.baseExt,Window:"nt2.js"+a.baseExt},a.require(j,
function(i,j){a.base.hiddenLoading();j?(a.Log("load $chatManage mode complete"),a.chatManage.open(b,d,c,e,f,g,h)&&a.cache.set("opd",1)):a.Log("Load $chatManage mode failed",3)}))},startInvite:function(b,d,c){a.Log("$.base.startInvite("+b+")");b&&a.require({Window:"nt2.js"+a.baseExt,invite:"entrance1.js"+a.baseExt},function(e,f){e?f?a.invite.start(b,d,c):a.Log("Load $.invite mode failed",3):a.Log("Load $.Window mode failed",3)})},showLoading:function(){a.base.chatLoading=!0;a.base.startTime=a.getTime();
!this.loadingElement||!this.loadingElement.length?this.loadingElement=a({id:"ntalk-chat-loading",style:a.STYLE_NBODY+"width:100%;height:33px;position:fixed:right:0;bottom:0;z-index:9999;"}).appendTo(!0).fixed({right:0,bottom:0}).html('<div style="'+a.STYLE_BODY+"margin:0 auto;width:99px;height:33px;background:url("+a.imageloading+') no-repeat 0 0;"></div>'):this.loadingElement.display(1);return this.loadingElement},hiddenLoading:function(){this.loadingElement.display();a.base.endTime=a.getTime();
a.base.chatLoading=!1;a.Log("$.base.showLoading-hiddenLoading execute time:"+(a.base.endTime-a.base.startTime)+" ms",1)},toLongID:function(b){var d=this.checkID(b);if(d===a.CON_SHORT_ID)return a.global.siteid+"_ISME9754_"+b;if(!1===d)return""},checkID:function(b){b=b?b.toString():"";return!b||"0"===b?!1:-1<b.indexOf("_ISME9754_T2D")?a.CON_CUSTOMER_ID:-1<b.indexOf("_ISME9754_GT2D")?a.CON_GROUP_ID:-1<b.indexOf(a.global.siteid+"_ISME9754_")?a.CON_VISITOR_ID:a.CON_SHORT_ID},startOtherMode:function(b,
d){var c=a.cache.get("uid")||"";clearTimeout(this._connectTimeID);this._connectTimeID=null;this._identityIDReady=!0;a.Log("cache uid:"+c+", site uid:"+b+", return uid:"+b,1);this._islogin=c?c!=b:!0;a.global.pcid=d;a.user.id=b;a.isDefined(a.global.uname)&&(a.user.name=a.global.uname);a.cache.set("uid",b);a.cookie.set(a.CON_PCID_KEY,d,63072E6);1==a.server.notrail?a.Log("no load trail"):this.startTrail(this._islogin);"1"==a.server.enable_invite&&this.startInvite(a.global.settingid);!a.server.isnoim||
3==a.server.isnoim||2==a.server.isnoim&&"1"==a.cache.get("opd")?(a.Log("nTalk.base.startIM()",1),this.startIM()):a.Log("no load im, isnoim:"+a.server.isnoim+", opd:"+a.cache.get("opd"),1);var e={settingid:a.cache.get("carry_sid"),destid:a.cache.get("carry_did")};0!=a.server.sessioncarry&&e.settingid?(a.Log("sessioncarry:"+a.JSON.toJSONString(e),2),a.cache.set("carry_sid",""),a.cache.set("carry_did",""),e.settingid&&(a.browser.mobile||!a.global.pageinchat?(c={single:-1},a.im_openOutPageChat(e.settingid,
"",e.destid,c,"")):(c={autoconnect:!0,single:-1},a.im_openInPageChat(e.settingid,"",e.destid,c,"")))):0<a.server.preload&&this.preloadChat()},preloadChat:function(){var b;a.Log("$.base.preloadChat()",1);setTimeout(function(){!0!==a.base.chatLoading&&(b={lang:(a.extParmas.lan||"zh_cn")+".js"+a.baseExt,chatManage:"chat.in.js"+a.baseExt,Window:"nt2.js"+a.baseExt},a.require(b,function(b,c){c?a.Log("preload $chatManage mode complete"):a.Log("preload $chatManage mode failed",3)}))},a.server.preload)},getPageData:function(){if("undefined"==
typeof window.NTKF_PARAM)return window.NTKF_PARAM={},!1;a.Log("nTalk.base.getPageData()");this.__page_data=a.extend({},this._get_page_data,"undefined"!==typeof NTKF_PARAM?NTKF_PARAM:null);a.whereGetTo(a.global,this.__page_data,"siteid sellerid settingid uid uname exparams isvip userlevel itemid itemparam orderid orderprice erpparam ntalkerparam pagetype title lang".split(" "),[null,null,null,"shortid","uname","exparams"]);a.global.pagetype=a.params.source||"";a.global.title=a.title.substr(0,32);a.global.isvip=
a.isNumeric(a.global.isvip)?a.global.isvip:a.isNumeric(a.global.userlevel)?a.global.userlevel:0;a.global.userlevel=a.isNumeric(a.global.userlevel)?a.global.userlevel:"";a.global.sellerid=a.isArray(a.global.sellerid)?a.global.sellerid:-1<a.global.sellerid.toString().indexOf(",")?a.global.sellerid.split(","):a.global.sellerid?[a.global.sellerid]:[];a.global.orderid=a.isArray(a.global.orderid)?a.global.orderid:-1<a.global.orderid.toString().indexOf(",")?a.global.orderid.split(","):a.global.orderid?[a.global.orderid]:
[];a.global.orderprice=a.isArray(a.global.orderprice)?a.global.orderprice:-1<a.global.orderprice.toString().indexOf(",")?a.global.orderprice.split(","):a.global.orderprice?[a.global.orderprice]:[];-1<a.inArray(a.global.siteid,k)&&(a.global.shortid=a.global.uname||"");!a.global.itemid&&a.global.ntalkerparam&&a.global.ntalkerparam.item&&(a.global.itemid=a.global.ntalkerparam.item.id);if(a.isObject(a.global.shortid)||a.isObject(a.global.uname)||a.isObject(a.global.siteid)||a.isObject(a.global.settingid))return!1;
a.global=this.filterJSONChar(a.global,"");a.global.shortid=a.enCut(a.global.shortid,64-a.enLength(a.global.siteid)-10);a.global.uname=a.enCut(a.global.uname,32);a.global.uid=this.toLongID(a.global.shortid);a.Log("global: "+a.JSON.toJSONString(a.global),1);return a.global},_filterChar:function(b,d){var c=[],e,f;d&&a.each(this.entityList,function(a,c){try{e=RegExp(a,"gi"),b=b.replace(e,c)}catch(d){}});for(var g=0,h=b.length;g<h;g++)try{f=encodeURIComponent(b.charAt(g)),c.push(b.charAt(g))}catch(j){try{f=
encodeURIComponent(b.charAt(g)+b.charAt(g+1)),c.push((!c.length?"":" ")+f.replace(/%/gi,"")+(g+2>=h?"":" ")),++g}catch(i){c.push(b.charAt(g))}}return c.join("")},filterJSONChar:function(b,d){var c,e=this;if(a.isObject(b))c={},a.each(b,function(a,b){c[a]=e.filterJSONChar(b,a)});else if(a.isArray(b)){c=[];for(var f=0;f<b.length;f++)c[f]=this.filterJSONChar(b[f],f)}else c="string"==typeof b?this._filterChar(b,-1!==a.inArray(d,this.fieldList)):b;return c},_loadIdentityID:function(b){var d=this,c,e,f=
a.cookie.get(a.CON_PCID_KEY);a.global.trailid=a.cache.get("tid");this.userIdFix=a.global.siteid+"_ISME9754_";a.global.trailid&&(e=Math.round((a.getTime()-+a.global.trailid.toString().substr(0,13))/36E5),4<=e&&(a.global.trailid=""));a.global.trailid||(a.global.trailid=a.getTime(2),a.base.clearChatCache=!0,a.flashData&&a.flashData.clearAll());f&&10<f.length?(c=a.global.uid&&-1<a.global.uid.indexOf(a.global.siteid)?a.global.uid:this.userIdFix+f.substr(0,21),a.Log("load PCID:"+f+", uid:"+c),b.call(this,
c,f)):a.flash.support&&!a.browser.mobile?(this._createNTID({u:a.global.uid,siteid:a.global.siteid,loadnid:a.CON_LOAD_MODE_NID}),f=this._createScriptPCID(!0),a.Log("create flash PCID, tmp pcid:"+f),c=a.global.uid||this.userIdFix+f.substr(0,21),a.global.pcid=f,a.user.id=c,this._connectTimeID=setTimeout(function(){a.global.connect=a.CON_CONNECT_COMET;a.Log("timeout:"+d.timeOut+" no create pcid",2);b.call(this,c,f)},this.timeOut)):(f=this._createScriptPCID(!1),a.Log("create script PCID"),c=a.global.uid||
this.userIdFix+f.substr(0,21),b.call(this,c,f))},_createNTID:function(b){var d=a("#nt-flash-div"),b=a.flashHtml("ntkf_flash_ntid",a.sourceURI+"fs/NTID.swf?"+a.version.ntid,b);d.length||(d=a(document.body).insert('<div id="nt-flash-div" style="position: absolute; z-index: 9996; top: -200px;"></div>'));d.insert(b)},_createScriptPCID:function(b){return"guest"+[b?"TEMP"+a.randomChar(4):a.randomChar(8),a.randomChar(4),a.randomChar(4),a.randomChar(4),a.randomChar(12)].join("-")},_loadFlashServer:function(){a.Log("start load flashserver.");
a.require({flashserver:a.server.flashserver+"/func/getflashserver.php?"+a.toURI({resulttype:1,siteid:a.global.siteid,callbackname:"nTalk._callFlashServer"})+"#rnd"},function(b){b=a.extend({},l,b);a.server=a.protocolFilter(a.extend(a.server,b))})}};a.extend({_callFlashServer:function(b,d){a.flashserver=b;a.server=a.protocolFilter(a.extend(a.server,a.flashserver));a.Log("$flashserver loading is complete. resultType:"+d)},fIM_presenceFlashReady:function(b,d){setTimeout(function(){a.base._identityIDReady?
(a.Log("$.fIM_presenceFlashReady()"),a.Event.fireEvent(document,"focus")||a.Event.fireEvent(document,"click"),a.im&&a.im.connect&&a.im.connect.stopSwitchConnect()):(a.Log(">RETURN flash PCID, uid:"+b+", pcid:"+d,1),b&&d&&a.base.startOtherMode(b,d))},0);return!0}});a.extend({im_openInPageChat:function(b,d,c,e,f){var g,h,j,i;a.base._startBase?(a.Log("nTalk.im_openInPageChat()",1),b=b||a.global.settingid||"",g=a.global.settingid?a.global.settingid.split("_").splice(0,2).join("_"):"",h=b?b.split("_").splice(0,
2).join("_"):"",i=a.global.sellerid&&a.global.sellerid.length?a.global.sellerid[0]:"",e=a.extend({},e),d||(!h||""!=h&&(h==i||h==g)?(d=a.global.itemid,f=a.global.itemparam):f=d=""),i=h!=a.global.siteid?h:"",a.Log("settingId:"+b+", itemId:"+d+", itemparam:"+f),a.invite&&a.invite._close(),a.browser.mobile||!0!==a.global.pageinchat?this.im_openOutPageChat(b,d,c,e,f):(g=e&&e.single?e.single:"",h=e&&a.isDefined(e.autoconnect)?e.autoconnect:!1,this.base.startChat(b,c,d,f,i,h,g))):(a.base.start(),function(){j=
arguments;a.base._startBase?a.im_openInPageChat(b,d,c,e,f):setTimeout(function(){j.callee()},50)}())},im_openOutPageChat:function(b,d,c,e,f){var g,h,j,i;a.base._startBase?(a.Log("nTalk.im_openOutPageChat()",1),b=b||a.global.settingid||"",g=a.global.settingid?a.global.settingid.split("_").splice(0,2).join("_"):"",h=b?b.split("_").splice(0,2).join("_"):"",i=a.global.sellerid&&a.global.sellerid.length?a.global.sellerid[0]:"",e=a.extend({},e),d||(!h||""!=h&&(h==i||h==g)?(d=a.global.itemid,f=a.global.itemparam):
f=d=""),i=h!=a.global.siteid?h:"",a.Log("settingId:"+b+", itemId:"+d+", itemparam:"+f),g=e&&e.single?e.single:"",i={v:a.version.script,siteid:a.global.siteid,sellerid:i,settingid:b,baseuri:a.baseURI,mobile:a.browser.mobile?1:0,rnd:a.getTime(),lan:a.extParmas.lan||"","ntalker-debug":a.params["ntalker-debug"]||a.cache.get("debug")},g={uid:a.user.id,uname:a.user.name,pcid:a.global.pcid,vip:a.global.isvip,ulevel:a.global.userlevel,destid:c||"",single:g?g:!c?-1:-1<c.indexOf("GT2D")?0:1,chattype:"",chatvalue:"",
itemid:d,itemparam:f,erpparam:a.global.erpparam,ref:a.url,tit:a.title,exparams:a.global.exparams},new a.POST(a.server.flashserver+"chat.php?"+a.toURI(i,!1,"&"),g,function(){a.Log("open chat window complete",1)},a.browser.mobile?"_self":"_blank")):(a.base.start(),function(){j=arguments;a.base._startBase?a.im_openInPageChat(b,d,c,e,f):setTimeout(function(){j.callee()},50)}())},t2d:{openChatWindow:function(b,d,c){a.im_openOutPageChat(c,"",b,null,"")}},enableDebug:function(){a.cache.get("debug")||a.cache.set("debug",
2);a.mDebug||a.require({mDebug:"debug.js"+a.baseExt,Window:"nt2.js"+a.baseExt},function(b){b&&!b.error&&(a.mDebug.initialize(),a.Log=a.mDebug.Log,a.debug=a.mDebug)});return a.cache.get("debug")}});if(!a.isDefined(CON_SERVER))throw"CON_SERVER is not defined";a.imageloading=a.sourceURI+"images/loading.gif";a.server=a.extend({},a.protocolFilter(CON_SERVER));a.version=a.extend({},a.version,CON_VERSION);0<parseFloat(a.params["ntalker-debug"])||0<+a.cache.get("debug")?a.require({mDebug:"debug.js"+a.baseExt,
Window:"nt2.js"+a.baseExt},function(b){b&&!b.error&&(a.mDebug.initialize(),a.Log=a.mDebug.Log,a.debug=a.mDebug,a.base.start())}):(a.Log=new Function,a.debug={Log:a.Log},a.base.start());a.require(a.imageloading)}})(nTalk);

/* @file nt2.js
 * @date 2015.10.20 18:20:11 
 */
(function(a,n){if(a.animate)a.Log("nt2.js loaded");else{var m;m=document.documentElement.style;if(m.webkitTransition!==n||m.MozTransition!==n||m.OTransition!==n||m.msTransition!==n||m.transition!==n){m=document.documentElement.style;var t=(m.webkitTransition!==n?"Webkit":m.MozTransition!==n?"Moz":m.OTransition!==n?"O":m.msTransition!==n?"ms":"")+"Transition";m=function(b,d,c,e){var f=[],g=[],i=[],l=[],q=b.style,c=c||300;a.each(d,function(d,c){g[d]=a.camelize(d);a.isObject(c)?(c.to=c.to||0,f[d]=!a.cssNumber[d]?
parseInt(c.to,10):c.to,i[d]=a.unit(d,c.to),a.isDefined(c.from)&&a.css(b,g[d],parseInt(c.from,10)+i[d])):(f[d]=a.cssNumber[d]?parseInt(c,10):c,i[d]=a.unit(d,c),a.css(b,g[d],f[d]));l.push(d)});setTimeout(function(){q[t]="all "+c+"ms";a.each(l,function(b,a){q[g[a]]=f[a]+i[a]})},15);setTimeout(function(){q[t]="";e&&e.call(b)},c);return b}}else m=function(b,d,c,e){var f=0,g=0,i=0,l=[],q=[],h=[],j=[],m=[],k,c=c||300;a.each(d,function(d,c){h.push(a.camelize(d));a.isObject(c)?(k=c.to,a.isDefined(c.from)?
q.push(!a.cssNumber[d]?parseInt(c.from,10):c.from):q.push(!a.cssNumber[d]?parseInt(a(b).css(d),10):a(b).css(d)),a.css(b,h[g],q[g]+a.unit(d,k))):(k=c,q.push(a(b).css(d)));l.push(a.cssNumber[d]?k:isNaN(parseInt(k,10))?"":parseInt(k,10));j.push(a.unit(d,k));g++;i++});for(d=0;30>d;d++){m[d]=[];for(g=0;g<i;g++)m[d][h[g]]=!a.cssNumber[h[g]]&&!a.isNumeric(parseInt(q[g]))?"":q[g]+(l[g]-q[g])/30*d+("opacity"===h[g]?"":j[g])}for(;30>g;g++)setTimeout(function(){for(g=0;g<i;g++)a.css(b,h[g],m[f][h[g]]);f++},
c/30*g);setTimeout(function(){for(g=0;g<i;g++)a.css(b,h[g],l[g]+j[g]);e&&e.call(b)},c);return b};a.animate=m;a.Window=a.Class.create();a.Window.prototype={defaultOptions:{width:520,height:410,left:100,top:100,dropHeight:30,minWidth:520,minHeight:410,resize:!1,drag:!1,fixed:!1,zIndex:1E6,rightNode:!0,onChanage:new Function,onClose:new Function,onMinimize:new Function,onMaximize:new Function,onMaxResize:new Function},_tmpMove:null,_tmpStop:null,_drag:null,_left:null,_head:null,_body:null,_right:null,
_resize:null,_close:null,_maxresize:null,_minimize:null,_x:0,_y:0,_isdrag:null,_Style:null,parent:null,initialize:function(b,d){a.extend(this,this.defaultOptions,b);this.parent=d||null;this.quirks=a.browser.msie6||a.browser.Quirks&&a.browser.oldmsie;this.right=a(window).width()-this.left-this.width;this.bottom=a(window).height()-this.top-this.height;this._create();this._bind()},close:function(b){this.cancelBubble(b);if(-1>=this.onClose.toString().indexOf("anonymous"))this.onClose();else this._drag.hide(function(){a(this).remove()})},
change:function(b){b&&this.onChanage.call(this,{width:this.width,height:this.height});this._isdrag||(this._left.css("height",this.height+"px"),this._body.css({height:this.height-this.dropHeight+"px"}),this.rightNode&&this._right.css("height",this.height+"px"))},maxresize:function(){this.onMaxResize()},minimize:function(b,a){!0!==a&&this.cancelBubble(b);this._drag.css({height:"0px",width:"0px"});if(!0!==a)this.onMinimize()},maximize:function(b,a){this._drag.css({height:this.height+"px",width:this.width+
"px"});if(!0!==a)this.onMaximize()},cancelBubble:function(b){this._drag.css("z-index",this.zIndex);a.Event.fixEvent(b).stopPropagation()},changeAttr:function(b,d){this.quirks&&this.clearExpression();a.extend(this,{width:b,height:d,left:Math.max(0,a(window).width()-this.right-b),top:Math.max(0,a(window).height()-this.bottom-d)});this._drag.css({width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px"});this.quirks&&this.fixedPosition();this.change(!0)},start:function(b,d){d||
this.cancelBubble(b);this._Style=d?{x:"left",y:"top"}:{x:"width",y:"height"};this.right=a(window).width()-this.left-this.width;this.bottom=a(window).height()-this.top-this.height;this.quirks&&!d&&this.clearExpression();b=a.Event.fixEvent(b);this._drag.css({"z-index":++this.zIndex});this._x=(this._isdrag=d)?b.clientX-this._drag.get(0).offsetLeft||0:this._drag.get(0).offsetLeft||0;this._y=d?b.clientY-this._drag.get(0).offsetTop||0:this._drag.get(0).offsetTop||0;a.browser.msie?this._drag.bind("losecapture",
this._tmpStop).get(0).setCapture():(a.Event.fixEvent(b).preventDefault(),a(window).bind("blur",this._tmpStop));a(document).bind("mousemove",this._tmpMove);a(document).bind("mouseup",this._tmpStop)},move:function(b){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();var b=a.Event.fixEvent(b),d=b.clientX-this._x,b=b.clientY-this._y,c=a(window).offset();this._isdrag?(this.quirks?(this[this._Style.x]=Math.min(Math.max(d,c.left),c.left+a(window).width()-this.width)-
c.left,this[this._Style.y]=Math.min(Math.max(b,c.top),c.top+a(window).height()-this.height)-c.top):(this[this._Style.x]=Math.min(Math.max(d,0),a(window).width()-this.width),this[this._Style.y]=Math.min(Math.max(b,0),a(window).height()-this.height)),this._drag.css(this._Style.x,(this.quirks?c.left:0)+Math.max(0,this[this._Style.x])+"px"),this._drag.css(this._Style.y,(this.quirks?c.top:0)+Math.max(0,this[this._Style.y])+"px")):(this.quirks?(this[this._Style.x]=Math.min(Math.max(d+(this.quirks?c.left:
0),this.minWidth),a(window).width()-this.left),this[this._Style.y]=Math.min(Math.max(b+(this.quirks?c.top:0),this.minHeight),a(window).height()-this.top)):(this[this._Style.x]=Math.min(Math.max(d,this.minWidth),a(window).width()-this.left),this[this._Style.y]=Math.min(Math.max(b,this.minHeight),a(window).height()-this.top)),this._drag.css(this._Style.x,this[this._Style.x]+"px"),this._drag.css(this._Style.y,this[this._Style.y]+"px"));this.right=a(window).width()-this.left-this.width;this.bottom=a(window).height()-
this.top-this.height;this.change(!0)},stop:function(){this.quirks&&this.fixedPosition();this._drag.css({"z-index":--this.zIndex});a(document).removeEvent("mousemove",this._tmpMove);a(document).removeEvent("mouseup",this._tmpStop);a.browser.msie?this._drag.removeEvent("losecapture",this._tmpStop).get(0).releaseCapture():a(window).removeEvent("blur",this._tmpStop)},fixedPosition:function(){if(this.quirks){var b=a(window).scrollTop();a(window).scrollTop(b+1);this._drag.replaceIEcssText({left:"expression(eval(Math.max((document.documentElement.scrollLeft || document.body.scrollLeft), (document.documentElement.scrollLeft || document.body.scrollLeft) + (document.documentElement.clientWidth  || document.body.clientWidth ) - this.offsetWidth  - "+
this.right+")))",top:"expression(eval(Math.max((document.documentElement.scrollTop  || document.body.scrollTop ), (document.documentElement.scrollTop  || document.body.scrollTop ) + (document.documentElement.clientHeight || document.body.clientHeight) - this.offsetHeight - "+this.bottom+")))"});a(window).scrollTop(b);a(window).scrollLeft(1)}else this._drag.css({left:this.left+"px",top:this.top+"px"})},clearExpression:function(){var b=a(window).offset();this._drag.Expression("left","");this._drag.Expression("top",
"");this._drag.Expression("left","");this._drag.replaceIEcssText({left:b.left+this.left+"px",top:b.top+this.top+"px"})},_for_resize:function(){this.left=Math.max(0,a(window).width()-this.right-this.width);this.top=Math.max(0,a(window).height()-this.bottom-this.height);this.quirks||this._drag.css({left:this.left+"px",top:this.top+"px"})},_create:function(){this._drag=a({className:this.className||"window-containter",style:a.STYLE_BODY+"box-sizing:content-box;overflow:hidden;"}).appendTo(this.parent,
!0).css({position:!this.fixed?"static":!this.quirks?"fixed":"absolute",border:"none",width:this.width+"px",height:this.height+"px",zIndex:this.zIndex});this.fixedPosition();this._left=a({className:"window-left",style:a.STYLE_BODY+"float:left;width:100%;"}).appendTo(this._drag);this.drag&&(this._head=a({className:"window-head",style:a.STYLE_BODY+"cursor:move;position:relative;left:0;top:0;"}).appendTo(this._left).css({width:"100%",height:this.dropHeight+"px"}),this._close=a({className:"window-button-close",
style:a.STYLE_BODY+"width:20px;height:20px;cursor:pointer;position:static;float:right;position:relative;margin:2px 3px 0 0;line-height:20px;vertical-align:middle;background:none;"}).appendTo(this._head),this._maxresize=a({className:"window-button-maxresize",style:a.STYLE_BODY+"width:20px;height:20px;cursor:pointer;position:static;float:right;position:relative;margin:2px 3px 0 0;line-height:20px;vertical-align:middle;background:none;"}).appendTo(this._head),this._minimize=a({className:"window-button-min",
style:a.STYLE_BODY+"width:20px;height:20px;cursor:pointer;position:static;float:right;position:relative;margin:2px 3px 0 0;line-height:20px;vertical-align:middle;background:none;"}).appendTo(this._head));this._body=a({className:"window-body",style:a.STYLE_BODY+"width:100%;position:relative;left:0;top:0;"}).appendTo(this._left);this.rightNode&&(this._right=a({className:"window-right",style:a.STYLE_BODY+"float:left;display:none;width:100%;"}).appendTo(this._drag));this.resize&&(this._resize=a({className:"window-resize",
style:a.STYLE_BODY+"width:10px;height:10px;cursor:nw-resize;position:absolute;right:1px;bottom:1px;font-size:0;background:#f00;"}).appendTo(this._drag));a({style:a.STYLE_BODY+"clear:both;"}).appendTo(this._drag);this.change();return this._drag},_bind:function(){var b=this;this._drag.bind("mousedown",function(a){b.start.call(b,a,!0)});this._close.bind("mousedown",function(d){a.Event.fixEvent(d).stopPropagation();b.close.call(b,d)});this._maxresize.bind("mousedown",function(d){a.Event.fixEvent(d).stopPropagation();
b.maxresize.call(b,d)});this._minimize.bind("mousedown",function(d){a.Event.fixEvent(d).stopPropagation();b.minimize.call(b,d)});this._body.bind("mousedown",function(a){b.cancelBubble.call(b,a)});this.rightNode&&this._right.bind("mousedown",function(a){b.cancelBubble.call(b,a)});this.resize&&this._resize.bind("mousedown",function(a){b.start.call(b,a,!1)});this.fixed&&a(window).bind("resize",function(){b._for_resize()});this._tmpStop=function(a){b.stop.call(b,a)};this._tmpMove=function(a){b.move.call(b,
a)}}};a.Queue=a.Class.create();a.Queue.prototype={list:null,length:0,initialize:function(){this.list=[];this.length=this.list.length},isEmpty:function(){return 0===this.list.length},enQueue:function(b){this.list.push(b);this.length=this.list.length;return this.list[this.length-1]},deQueue:function(){var b;if(this.isEmpty())return null;b=this.list.shift();this.length=this.list.length;return b},queueFront:function(){return this.isEmpty()?null:this.list[0]}};a.pageManage=a.Class.create();a.pageManage.prototype=
{identid:"",keyid:"",data:null,interID:null,options:null,debug:!1,inter:0.8,count:0,chanageCall:!0,CON_MANAGE_PAGE_LIST:"IM_EXIST_PAGEARR",pageStore:null,initialize:function(b,d){var c=this,e;this.debug&&a.Log("pageManage.initialize():");this.options=a.extend(this.options,{onChanage:new Function,onInterval:new Function,pageNum:3,timeout:2.5,inter:0.8},b);this.keyid=a.CON_MANAGE_COOKIE+(d?"_"+d.toUpperCase():"");this.identid=this._2shortTime(0,8,13);this.options.timeout*=10;this.options.inter*=1E3;
this.inter=this.options.inter;this.pageStore=a.store;try{e=this.pageStore.get(this.CON_MANAGE_PAGE_LIST),e=!e||0==this._get().m.length?[]:e.split(","),e.push(this.identid),this.pageStore.set(this.CON_MANAGE_PAGE_LIST,e.join(","))}catch(f){}this._update();this.interID=setInterval(function(){setTimeout(function(){c._update();c.options.onInterval(c.options.timeout,c.data.m)},0)},this.options.inter);a.Event.addEvent(window,"unload",function(){c._remove();setTimeout(function(){},500)})},getIsLastPage:function(){return this.data.m.length},
_get:function(){var b=a.cookie.get(this.keyid)||"{}";return a.extend({m:[]},a.JSON.parseJSON(b))},_save:function(){var b=a.JSON.toJSONString(this.data);a.cookie.set(this.keyid,b,0);return b},_remove:function(){var b=this._getIndex();this.data.m.splice(b,1);this._save();b=this.pageStore.get(this.CON_MANAGE_PAGE_LIST);b=b.split(",");b.pop();b=b.join(",");""!=b?this.pageStore.set(this.CON_MANAGE_PAGE_LIST,b):this.pageStore.whereClear(this.CON_MANAGE_PAGE_LIST)},_update:function(){this.data=this._get();
this._clear();var b="update",d=this._getIndex();this.data.t=a.formatDate();if(!this.data.m[d])if(this.data.m.length<this.options.pageNum)b="add",this.data.m[d]={};else return;this.data.m[d][this.identid]=this._2shortTime();this._save();this.debug&&a.Log(this.identid+",pageCount:"+this.data.m.length+","+b+" data:"+a.JSON.toJSONString(this.data.m));if(("add"==b||!0!==this.chanageCall)&&this.count!=this.data.m.length)this.options.onChanage.call(this,this.data.m.length,this.data.m),this.count=this.data.m.length;
this.chanageCall=!1},_clear:function(){var b=this,d=this._2shortTime();if(this.data.m.length)for(var c=0;c<this.data.m.length;c++)a.each(this.data.m[c],function(a,f){Math.abs(d-f[a])>=b.options.timeout&&(b.data.m.splice(c,1),b.chanageCall=!0)})},_getIndex:function(){if(!this.data.m.length)return 0;for(var b=0;b<this.data.m.length;b++)if(this.data.m[b])for(var d in this.data.m[b])if(!a.isFunction(this.data.m[b][d])&&d===this.identid)return b;return b},_2shortTime:function(b,d,c){b=(b?b:a.getTime()).toString();
return b.substring(d||5,c||11)}};var h={disabled:!1},k;h.toJSONString=function(b){return null==b?"":a.JSON.toJSONString(b)};h.parseJSON=function(b){if("object"==typeof b)return b||n;try{return a.JSON.parseJSON(b)}catch(d){return b||n}};if(function(){if(window.localStorage)try{return localStorage.setItem("test","test"),"test"==localStorage.getItem("test")?(localStorage.removeItem("test"),!0):!1}catch(b){return!1}else return!1}())k=window.localStorage,h.set=function(b,d){if(!d||d===n||null===d)return h.remove(b);
try{"function"==typeof k.setItem?k.setItem(b,h.toJSONString(d)):k[b]=h.toJSONString(d)}catch(c){a.Log(c,3)}return d},h.get=function(b){return h.parseJSON(k.getItem(b))},h.remove=function(b){try{k.removeItem(b)}catch(d){a.Log(d,3)}},h.clear=function(){try{k.clear()}catch(b){a.Log(b,3)}},h.getAll=function(){for(var b={},a=0;a<k.length;++a){var c=k.key(a);b[c]=h.get(c)}return b};else{var s=RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),p,r;m=function(b){return function(){var a;a=Array.prototype.slice.call(arguments,
0);a.unshift(k);try{p.appendChild(k)}catch(c){p.insertBefore(k,p.firstChild)}k.addBehavior("#default#userData");for(var e=20;0<e;){e--;try{k.load("nTK-LS");break}catch(f){}}a=b.apply(h,a);p.removeChild(k);return a}};try{r=new ActiveXObject("htmlfile"),r.open(),r.write('<script type="text/javascript">document.w=window;<\/script><iframe src="/favicon.ico"></iframe>'),r.close(),p=r.w.frames[0].document,k=p.createElement("div")}catch(u){k=document.createElement("div"),p=document.body}h.set=m(function(b,
a,c){a=a.replace(s,"___");if(!c||c===n||null===c)return h.remove(a);b.setAttribute(a,h.toJSONString(c));try{b.save("nTK-LS")}catch(e){}return c});h.get=m(function(b,a){a=a.replace(s,"___");return h.parseJSON(b.getAttribute(a))});h.remove=m(function(b,a){a=a.replace(s,"___");b.removeAttribute(a);b.save("nTK-LS")});h.clear=m(function(b){var a=b.XMLDocument.documentElement.attributes;b.load("nTK-LS");for(var c=0,e=a.length;c<e;c++)b.removeAttribute(a[c].name);b.save("nTK-LS")});h.getAll=m(function(b){for(var a=
b.XMLDocument.documentElement.attributes,c={},e=0,f=a.length;e<f;++e){var g=a[e],i=g.name.replace(s,"___");c[g.name]=h.parseJSON(b.getAttribute(i))}return c})}try{h.set("__cometd__","__cometd__"),"__cometd__"!=h.get("__cometd__")&&(h.disabled=!0),h.remove("__cometd__")}catch(v){h.disabled=!0}h.whereClear=function(b){var d=this,c=this.getAll();a.each(c,function(a){-1<a.indexOf(b)&&d.remove(a)})};h.enabled=!h.disabled;a.store=h;a.comet=a.Class.create();a.comet.prototype={name:"public.comet",version:"2014.05.17",
connType:"login",options:null,fix:"",id:"",count:0,sendIntervalID:null,_ipExpr:/^https?:\/\/\d+\.\d+\.\d+\.\d+(:\d+)?\/(.*?)$/gi,_cacheElement:{},_connectTimeID:{},defaultOption:{muDomain:3,timeout:20,onCallback:new Function,onComplete:new Function,onAbnormal:new Function,onTimeout:new Function},initialize:function(b,d){var c=this;this.uri=b;this.fix=a.randomChar();this.uri||a.Log("comet uri is null",3);this.callMethod=window;this.callbackName="callback_"+this.fix;this.callMethod[this.callbackName]=
function(){c._connectCallback.call(c,c.id,arguments)};this.options=a.extend({},this.defaultOption,d);this.initConnectionPooling()},initMessageQueue:function(){this.messageQueue||(this.messageQueue=new a.Queue,this.messageQueue.addMessage=function(b){for(var a=0;a<this.length;a++)if(this.list[a].msgid==b.msgid&&this.list[a].index==b.index)return!1;this.enQueue(b);return!0},this.messageQueue.nextMessage=function(b,a){if(this.isEmpty())return null;if(!b)return this.queueFront();for(var c=0;c<this.length;c++)if(this.list[c].msgid==
b&&this.list[c].body.sendpacket==a)return this.list[c+1]},this.messageQueue.removeMessage=function(){for(var b=0;b<this.length;b++);this.list.splice(b,1);this.length=this.list.length})},initConnectionPooling:function(){if(!this.connectionPooling){this._ipExpr.test(this.uri)&&(this.options.muDomain=1);this.connectionPooling=new a.Queue;this.connectionPooling.get=function(){for(var b,a,e=0;e<this.list.length;e++){if(!1===this.list[e].lock&&(!b||b.rTimesample>this.list[e].rTimesample))b=this.list[e];
if(!a||this.list[e].sTimesample<a.sTimesample)a=this.list[e]}b=b||a;this.recover(b.uri,!0);return b};this.connectionPooling.getConnect=function(){var b=this.get();return{uri:b.uri,url:b.uri+(/\?$/ig.test(b.uri)?"&":"?")}};this.connectionPooling.recover=function(b,c,e,f){for(var g=0;g<this.list.length;g++)if(this.list[g].uri==b)return(this.list[g].lock=c)?(this.list[g].sTimesample=e||a.getTime(),this.list[g].rTimesample=0):this.list[g].rTimesample=f||a.getTime(),!0;return!1};for(var b=0;b<=this.options.muDomain;b++)this.connectionPooling.enQueue({uri:0===
b?this.uri.toString().replace(/(https?:\/\/)(.*?)(\-\d+)?\./ig,"$1$2."):this.uri.toString().replace(/(https?:\/\/)(.*?)(\-\d+)?\./ig,"$1$2-"+(+b-1)+"."),lock:!1,sTimesample:0,rTimesample:0})}},connect:function(b,d){var c,e,f=this.count++;this.connType="login";this.id=this.fix+"_"+f;b[d||"callbackname"]=this.callbackName;this.connectOptions=a.extend(b,{ts:a.getTime()});c=this.connectionPooling.getConnect();e=c.url+a.toURI(this.connectOptions);this._cacheElement[this.id]=this._createConnect(e,this.id,
f,c)},kalive:function(b,d){var c,e,f=this.count++;this.connType="kalive";this.id=this.fix+"_"+f;b[d||"callbackname"]=this.callbackName;this.kaliveOptions=a.extend(this.kaliveOptions,b,{ts:a.getTime()});c=this.connectionPooling.getConnect();e=c.url+a.toURI(this.kaliveOptions);this._cacheElement[this.id]=this._createConnect(e,this.id,f,c)},disconnectServer:function(b,d){return this.flashGoServer=this.connectionPooling.getConnect().url+a.toURI(!1===d?b:a.extend(b,{ts:a.getTime()}))},disconnect:function(){a.require(this.flashGoServer,
function(b){a(b.error?b.target:b).remove()});window[this.callbackName]=new Function},reconnect:function(){this.connect(this.connectOptions)},send:function(b,d){var c=this,e=this.connectionPooling.getConnect(),f=this.mdyServerAddr(e.url)+a.toURI(b);a.require(f+"#rnd",function(b){c.connectionPooling.recover(e.uri,!1);d&&d.call(c,b.error);a(b.error?b.target:b).remove()});return!0},mdyServerAddr:function(b){return b.replace(/\/flashgo/i,"/httpgo")},post:function(b,d){var c=this,e=this.connectionPooling.getConnect();
new a.POST(this.mdyServerAddr(e.url),b,function(){c.connectionPooling.recover(e.uri,!1);d&&d.call(c,!0)})},_createConnect:function(b,d,c,e){var f=this,g,c=document.head||nTalk("head")[0]||document.documentElement;g=a({className:d,tag:"script",type:"text/javascript",async:"async",src:b,charset:"utf-8"}).appendTo(c);b=g.get(0).readyState?"onreadystatechange":"onload";g.get(0)[b]=g.get(0).onerror=function(b){var c=g.get(0).readyState,b=a.Event.fixEvent(b);/^(loaded|complete|undefined)$/.test(c)&&(f.connectionPooling.recover(e.uri,
!1),"error"!==b.type?setTimeout(function(){f._connectComplete(b,d);g.remove()},a.browser.msie?800:50):(f._connectAbnormal(b,d),g.remove()))};this._connectTimeID[d]=setTimeout(function(){g.first().remove();f._connectTimeout("timeout",d)},1E3*+this.options.timeout+1E4);return g.get(0)},_connectCallback:function(b,d){d=Array.prototype.slice.call(d);a("."+b).remove();this._cacheElement[b]?(this._stopCallComplete(b,"callback"),this.options.onCallback.apply(self,[!0,d])):this.options.onCallback.apply(self,
[!1,d])},_connectComplete:function(b,a){var c=Array.prototype.slice.call(arguments);this._cacheElement[a]&&(this._stopCallComplete(a,"complete"),this.options.onComplete.apply(self,[this.connType].concat(c)))},_connectAbnormal:function(b,a){var c=Array.prototype.slice.call(arguments);this._cacheElement[a]&&(this._stopCallComplete(a,"abnormal"),this.options.onAbnormal.apply(self,[this.connType].concat(c)))},_connectTimeout:function(b,a){var c=Array.prototype.slice.call(arguments);this._cacheElement[a]&&
(this._stopCallComplete(a,"timeout"),this.options.onTimeout.apply(self,[this.connType].concat(c)))},_stopCallComplete:function(b){var d=this._cacheElement[b];d?d.onload=d.onreadystatechange=d.onerror=new Function:a.Log("stop error id:"+b,3);delete this._cacheElement[b];clearTimeout(this._connectTimeID[b]);delete this._connectTimeID[b]},_createScriptPCID:function(b){return"guest"+[b?"TEMP"+a.randomChar(4):a.randomChar(8),a.randomChar(4),a.randomChar(4),a.randomChar(4),a.randomChar(12)].join("-")}};
a.extend({htmlToElement:function(b){var d,c;if(a.browser.msie)try{d=new ActiveXObject("MSXml.DOMDocument"),d.loadXML(b),c=d.childNodes}catch(e){d=document.createElement("DIV"),d.innerHTML=b,c=d.childNodes}else d=document.createElement("DIV"),d.innerHTML=b,c=d.childNodes;return c},elementToObject:function(b){var d={},c;c=a.isArray(b)||b.talkVersion?b[0]:b;d[c.tagName.toLowerCase()]=c.innerHTML;if(c.attributes)for(var e=0;e<c.attributes.length;e++){if(b=c.attributes[e].name)d[b]=c.attributes[e].value}else d.msg=
c.textContent;return d},jsonToxml:function(b){var d=this,c="",e;if("object"==typeof b)a.each(b,function(f,g){if("string"==typeof g&&"text"==f)c=g;else if(a.isArray(b))c+=d.jsonToxml(g);else{c+="<"+f;if("object"==typeof g.attributes){for(var i in g.attributes)g.attributes.hasOwnProperty(i)&&(c+=" "+i+'="'+g.attributes[i]+'"');delete g.attributes}e=d.jsonToxml(g);c=g&&e?c+(">"+e+"</"+f+">"):c+("></"+f+">")}});else return b;return c},utils:{options:{},handleLinks:function(b,d){this.options=a.extend({},
this.options,d);for(var b=b||"",c=0;c<this.linkPatterns.length;c++)b=b.replace(this.linkPatterns[c][0],this.linkPatterns[c][1]);return b},linkPatterns:[[/\[link\s+reconnect=([^\s\[\]'"]+)\s*[^\[\]]*]([^\[\]]+)\[\/\s*link]/gi,'<a style="'+a.STYLE_BODY+'color:#005ffb;text-decoration:none;" href="javascript:void(0);" onclick="nTalk.chatManage.get(\'$1\').reconnect(this);return false;" >$2</a>'],[/\[link\s+message=([^\s\[\]'"]+)\s*[^\[\]]\s*source=([^\s\[\]'"]+)\s*[^\[\]]*]([^\[\]]+)\[\/\s*link]/gi,'<a style="'+
a.STYLE_BODY+'color:#005ffb;text-decoration:none;" href="javascript:void(0);" onclick="nTalk.chatManage.get(\'$1\').switchUI(\'message\', $2);return false;" >$3</a>'],[/\[link\s+cancel=([^\s\[\]'"]+)\s+action=([^\s\[\]'"]+)\s*[^\[\]]*]([^\[\]]+)\[\/\s*link]/gi,'<a style="'+a.STYLE_BODY+'color:#005ffb;text-decoration:none;" href="javascript:void(0);" onclick="nTalk.chatManage.get(\'$1\').cancelUpload(\'$2\');return false;" >$3</a>'],[/\[link\s+resend=([^\s\[\]'"]+)\s+msgid=([^\s\[\]'"]+)\s*[^\[\]]*]([^\[\]]+)\[\/\s*link]/gi,
'<a style="'+a.STYLE_BODY+'color:#005ffb;text-decoration:none;" href="javascript:void(0);" onclick="nTalk.chatManage.get(\'$1\').resend(\'$2\', this);return false;" >$3</a>'],[/\[link\s*manual=([^\s\[\]'"]+)](.*?)\[\/link]/gi,'<a style="'+a.STYLE_BODY+'color:#005ffb;text-decoration:none;" href="javascript:void(0);" onclick="nTalk.chatManage.get(\'$1\').switchServerType(true);return false;" >$2</a>'],[/\[link\s*robotindex=([^\s\[\]'"]+)](.*?)\[\/link]/gi,'<a style="'+a.STYLE_BODY+'color:#005ffb;text-decoration:none;" href="javascript:void(0);" onclick="nTalk.chatManage.get(\'{$settingid}\').send(\'$1\');return false;">$2</a>'],
[/\[link\s*href=(.*?)](.*?)\[\/link]/gi,'<a style="'+a.STYLE_BODY+'color:#005ffb;text-decoration:none;cursor:pointer;" href="$1">$2</a>'],[/\[link\s*(.*?)?](.*?)\[\/link]/gi,'<a style="'+a.STYLE_BODY+'color:#005ffb;text-decoration:none;cursor:pointer;" href="javascript:void(0);" onclick="window.open(\'$1\')">$2</a>'],[/\{\$(\w+)}/gi,function(b,d){return a.utils.options[d]||""}]]},toHSL:function(b){return a.isHex(b)?a.rgb2HSL(a.hex2RGB(b)):a.isRGB(b)?a.rgb2HSL(b):b},isHex:function(b){return"string"==
typeof b&&/^#?([0-9a-f]{3}|[0-9a-f]{6})$/ig.test(b)},isRGB:function(b){return a.isObject(b)&&a.isDefined(b.r)&&a.isDefined(b.g)&&a.isDefined(b.b)},isHSL:function(b){return a.isObject(b)&&a.isDefined(b.h)&&a.isDefined(b.s)&&a.isDefined(b.l)},hex2RGB:function(b){var b=b.toString().replace("#",""),a=b.split(""),c={};return c=3==b.length?{r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16)}:6==b.length?{r:parseInt(a[0]+a[1],16),g:parseInt(a[2]+a[3],16),b:parseInt(a[4]+a[5],16)}:
{r:0,g:0,b:0}},rgb2HSL:function(b){var a,c,e,f,g,i,l={};a=b.r/255;c=b.g/255;b=b.b/255;e=Math.min(a,c,b);i=Math.max(a,c,b);g=i-e;l.l=(i+e)/2;0==g?(l.h=0,l.s=0):(l.s=0.5>l.l?g/(i+e):g/(2-i-e),e=((i-a)/6+g/2)/g,f=((i-c)/6+g/2)/g,g=((i-b)/6+g/2)/g,a==i?l.h=g-f:c==i?l.h=1/3-g+e:b==i&&(l.h=2/3-e+f),0>l.h&&(l.h+=1),1<l.h&&(l.h-=1));return l}});a.fn.extend({animate:function(b,d,c){return a.each(this,function(e,f){a.animate(f,b,d,c)})},show:function(b,d){a.isFunction(b)&&(d=b,b=500);return this.animate({visibility:"visible",
opacity:{from:0,to:1}},b||500,d)},hide:function(b,d){a.isFunction(b)&&(d=b,b=500);return this.animate({opacity:{to:0}},b||500,d)},gradient:function(b,d,c){var e,f;return b?a.each(this,function(g,i){a.browser.oldmsie&&(e=/top|bottom/.test(b)?0:1,/right|bottom/.test(b)&&(f=d,d=c,c=f));if(a.browser.webkit){switch(b){case "top":e="0% 100%,0% 0%";break;case "right":e="0% 0%,100% 0%";break;case "bottom":e="0% 0%,0% 100%";break;case "left":e="100% 0%,0% 0%"}a(i).css("background-image",!b?"none":"-webkit-gradient(linear,"+
e+",color-stop(1, "+d+"),color-stop(0, "+c+"))")}else a.browser.gecko?a(i).css("background-image",!b?"none":"-moz-linear-gradient("+b+", "+d+", "+c+")"):a.browser.oldmsie?i.style.filter=i.currentStyle.filter.replace(/progid:DXImageTransform\.Microsoft\.gradient\((.*?)\)\s*/gi,"")+(!b?"":" progid:DXImageTransform.Microsoft.gradient(GradientType="+e+",startColorstr='"+d+"', endColorstr='"+c+"')"):a.browser.msie?a(i).css("background-image",!b?"none":"-ms-linear-gradient("+b+", "+d+", "+c+")"):a(i).css("background-image",
!b?"none":"linear-gradient("+b+", "+d+", "+c+")")}):a.each(this,function(b,c){a.browser.oldmsie?a(c).css("filter","none"):a(c).css("background-image","none")})}});a.extend({base64:{_strKey:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(b){for(var d=a.base64,c="",e,f,g,i,l,h,k=0,b=d._utf8_encode(b||"");k<b.length;)e=b.charCodeAt(k++),f=b.charCodeAt(k++),g=b.charCodeAt(k++),i=e>>2,e=(e&3)<<4|f>>4,l=(f&15)<<2|g>>6,h=g&63,isNaN(f)?l=h=64:isNaN(g)&&(h=64),c=c+d._strKey.charAt(i)+
d._strKey.charAt(e)+d._strKey.charAt(l)+d._strKey.charAt(h);return c},decode:function(b){for(var d=a.base64,c="",e,f,g,i,l,h=0,b=(b||"").replace(/[^A-Za-z0-9\+\/=]/g,"");h<b.length;)e=d._strKey.indexOf(b.charAt(h++)),f=d._strKey.indexOf(b.charAt(h++)),i=d._strKey.indexOf(b.charAt(h++)),l=d._strKey.indexOf(b.charAt(h++)),e=e<<2|f>>4,f=(f&15)<<4|i>>2,g=(i&3)<<6|l,c+=String.fromCharCode(e),64!=i&&(c+=String.fromCharCode(f)),64!=l&&(c+=String.fromCharCode(g));return c=d._utf8_decode(c)},_utf8_encode:function(a){for(var a=
a.replace(/\r\n/g,"\n"),d="",c=0;c<a.length;c++){var e=a.charCodeAt(c);128>e?d+=String.fromCharCode(e):(127<e&&2048>e?d+=String.fromCharCode(e>>6|192):(d+=String.fromCharCode(e>>12|224),d+=String.fromCharCode(e>>6&63|128)),d+=String.fromCharCode(e&63|128))}return d},_utf8_decode:function(a){for(var d="",c=0,e,f,g;c<a.length;)e=a.charCodeAt(c),128>e?(d+=String.fromCharCode(e),c++):191<e&&224>e?(f=a.charCodeAt(c+1),d+=String.fromCharCode((e&31)<<6|f&63),c+=2):(f=a.charCodeAt(c+1),g=a.charCodeAt(c+2),
d+=String.fromCharCode((e&15)<<12|(f&63)<<6|g&63),c+=3);return d}},FORM:{createInput:function(b,d,c){for(var e=[],f,g,i=a.browser.mobile,d=a.extend({id:"",rowspan:0,style:""},d),l='<span class="ntkf-text-red" style="'+a.STYLE_BODY+'padding:2px 5px 2px 0;color:#f00;">'+(c||"")+"</span>",h=0;h<b.length;h++){c=a.extend({titlewidth:"80px",inputwidth:"auto",input:{width:"90%",height:"auto"}},b[h]);f=c.title+(c.title.length==a.enLength(c.title)?":":"\uff1a");/zh_cn|zh_tw/.test(a.lang.language)&&16<a.enLength(c.title)||
c.multipart||/radio|checkbox/.test(c.type)&&2<c.options.length?(c.multipart=!0,e.push(i?'<tr style="'+a.STYLE_BODY+'"><td style="'+a.STYLE_BODY+'width:100%;">':['<tr style="',a.STYLE_BODY,'"><td style="',a.STYLE_BODY,'vertical-align:top;line-height:28px;color:#333;" colspan="2"><div style="',a.STYLE_BODY,'margin:5px 10px 5px 10px;color:#5a5a5a;">',f,!0===c.required?l:"","</div></td></tr>",'<tr style="'+a.STYLE_BODY+'"><td style="',a.STYLE_BODY,'padding:0 5px 0 0;text-align:right;vertical-align:top;line-height:28px;color:#333;"></td>',
'<td style="'+a.STYLE_BODY+"line-height:28px;width:"+c.inputwidth+';">'].join(""))):e.push('<tr style="'+a.STYLE_BODY+'">'+(i?"":'<td style="'+a.STYLE_BODY+"padding:0 5px 0 0;text-align:right;vertical-align:top;line-height:28px;color:#333;width:"+c.titlewidth+';"><div style="'+a.STYLE_BODY+'margin:4px 0 0 0;text-align:right;color:#5a5a5a;">'+(!0===c.required?l:"")+f+"</div></td>")+'<td style="'+a.STYLE_BODY+"line-height:28px;width:"+(i?"100%":c.inputwidth)+';">');switch(c.type){case "select":e.push('<select data-index="'+
h+'" name="'+c.name+'" style="'+a.STYLE_BODY+"border:1px solid #ccc;height:24px;color:#333;margin:0 0 4px;line-height:20px;width:"+(i?"99%":c.input.width)+';">');e.push('<option value="" style="'+a.STYLE_BODY+'color:#ccc;">'+c.defaultText+"</option>");for(g=0;g<c.options.length;g++)f=c.options[g],f="string"==typeof f?{text:f,value:f}:f,e.push('<option value="'+f.value+'" style="'+a.STYLE_BODY+'color:#333;">'+f.text+"</option>");e.push("</select>");break;case "radio":e.push('<ul style="'+a.STYLE_BODY+
'list-style:none;">');for(var k=0,j;k<c.options.length;k++)f=c.options[k],f="string"==typeof f?{text:f,value:f}:f,j=c.name+"_"+k,g=c.defaultText==f.value?" checked":"",e.push('<li class="form-item" style="'+a.STYLE_BODY+'list-style:none;padding:0 2px 0 0;color:#000;float:left;"><input type="radio" name="'+c.name+'"id="'+j+'" value="'+f.value+'" _custom_text="'+f.text+'" style="'+a.STYLE_BODY+'color:#333;"'+g+' /><label for="'+j+'" style="'+a.STYLE_BODY+'display:inline;color:#000;">'+f.text+"</label></li>");
e.push('<li style="'+a.STYLE_BODY+'list-style:none;clear:both;width:0;height:0;"></li>');e.push("</ul>");break;case "checkbox":e.push('<ul style="'+a.STYLE_BODY+'list-style:none;">');for(k=0;k<c.options.length;k++)f=c.options[k],f="string"==typeof f?{text:f,value:f}:f,j=c.name+"_"+k,g=c.defaultText==f.value?" checked":"",e.push('<li class="form-item" style="'+a.STYLE_BODY+'list-style:none;padding:0 2px 0 0;float:left;"><input type="checkbox" name="'+c.name+'" id="'+j+'" value="'+f.value+'" _custom_text="'+
f.text+'" style="'+a.STYLE_BODY+'color:#333;"'+g+' /><label for="'+j+'" style="'+a.STYLE_BODY+'display:inline;color:#000;">'+f.text+"</label></li>");e.push('<li style="'+a.STYLE_BODY+'list-style:none;clear:both;width:0;height:0;"></li>');e.push("</ul>");break;case "textarea":e.push('<textarea data-index="'+h+'" name="'+c.name+'" style="'+a.STYLE_BODY+"border:1px solid #ccc;color:#ccc;width:"+(i?"99%":c.input.width)+";height:"+c.input.height+';"'+(a.browser.html5?' placeholder="'+c.defaultText+'">':
">"+c.defaultText)+"</textarea>");break;default:e.push('<input data-index="'+h+'" type="text" name="'+c.name+'"'+(a.browser.html5?' placeholder="'+c.defaultText+'" value=""':' value="'+c.defaultText+'"')+' maxlength="32" style="'+a.STYLE_BODY+"border:1px solid #ccc;height:24px;width:"+(i?"99%":c.input.width)+';margin:0 0 4px;color:#ccc;"'),"phone"==c.verification&&e.push(" onblur=\"this.value=this.value.replace(/[^0-9-]+/, '');\" onkeyup=\"var keyCode=(event || window.event).keyCode; if( !/16|17|35|36|37|38|39|40/i.test(keyCode) ){this.value=this.value.replace(/[^0-9-]+/, '');}\""),
e.push(" />")}c.messageid&&(e.push('<div style="'+a.STYLE_BODY+'display:none;color:#EF7208;" class="form-info '+c.messageid+'">'),e.push('<div style="'+a.STYLE_BODY+"margin:2px;width:15px;height:15px;float:left;background:transparent url("+a.sourceURI+'/images/chaticon.png) no-repeat -160px -39px;"></div>'),e.push('<div style="'+a.STYLE_BODY+'color:#EF7208;float:left;" class="chat-view-info"></div>'),e.push('<div style="'+a.STYLE_BODY+'clear:both;width:0;height:0;"></div>'),e.push("</div>"));e.push("</td>");
d.style&&0===h&&e.push('<td style="'+a.STYLE_BODY+d.style+'" id="'+d.id+'" rowspan="'+d.rowspan+'"></td></tr>')}return e.join("")},bindFormEvent:function(b,d){a(d).find("input[type=text], textarea").bind("focus",function(){var c=a(this).css({color:"#333","border-color":a.browser.mobile?"#0079fe":"#666"}),d=c.attr("data-index")||0;b[d].defaultText==c.val()&&c.val("")}).bind("blur",function(){var c=a(this).css("border-color","#ccc"),d=c.attr("data-index")||0,d=b[d].defaultText;""===c.val()&&c.val(d);
(""===c.val()||c.val()==d)&&c.css("color","#ccc")})},verificationForm:function(b,d,c){for(var e,f,g=[],i,h,k=/\d{6,}/i,m=/^[a-zA-Z0-9\._-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/i,j=0;j<b.length;j++){switch(b[j].type){case "checkbox":h=[];e=a(c).find("input[name="+b[j].name+"]");f=a(c).find("input[name="+b[j].name+"][checked]");for(i=0;i<f.length;i++)h.push({value:f.get(i).value,text:a(f.get(i)).attr("_custom_text")});break;case "radio":h={value:"",text:""};e=a(c).find("input[name="+b[j].name+"]");a(c).find("input[name="+
b[j].name+"][checked]").each(function(b,c){c.checked&&(h={value:a(c).val()||"",text:a(c).attr("_custom_text")})});break;case "select":e=a(c).find("select[name="+b[j].name+"]");h=a("option[selected]",e).val()||"";h=b[j].defaultText&&h==b[j].defaultText?"":h;break;case "textarea":e=a(c).find("textarea[name="+b[j].name+"]");b[j].defaultText&&b[j].defaultText==e.val()?(h="",e.val("")):h=e.val().replace(/(^\s*)|(\s*$)/g,"");break;default:e=a(c).find("input[name="+b[j].name+"]"),b[j].defaultText&&b[j].defaultText==
e.val()?(h="",e.val("")):h=e.val().replace(/(^\s*)|(\s*$)/g,"")}f="string"==typeof h?""===h||!h.length:a.isArray(h)?0===h.length:""===h.value;i=b[j].messageid&&b[j].message?!0:!1;var n=a(c).find("."+b[j].messageid),p=a(c).find("."+b[j].messageid+" .chat-view-info");if(b[j].required&&f){i&&b[j].message[0]?(p.html(b[j].message[0]),n.display(1).show(),e.get(0).focus()):/radio|checkbox/.test(b[j].type)?e.parent().css("color","#f00"):e.css("border-color","#f00").get(0).focus();return}if("phone"==b[j].verification&&
!f&&!k.test(h)){i&&b[j].message[1]?(p.html(b[j].message[1]),n.display(1).show(),e.get(0).focus()):e.css("border-color","#f00").get(0).focus();return}if("email"==b[j].verification&&!f&&!m.test(h)){i&&b[j].message[1]?(p.html(b[j].message[1]),n.display(1).show(),e.get(0).focus()):e.css("border-color","#f00").get(0).focus();return}if(b[j].min&&!f&&a.enLength(h)<b[j].min){i&&b[j].message[1]?(p.html(b[j].message[1]),n.display(1).show(),e.get(0).focus()):e.css("border-color","#f00").get(0).focus();return}if(b[j].max&&
!f&&a.enLength(h)>b[j].max){i&&b[j].message[2]?(p.html(b[j].message[2]),n.display(1).show(),e.get(0).focus()):e.css("border-color","#f00").get(0).focus();return}i?n.hide(function(){a(this).display()}):/radio|checkbox/.test(b[j].type)?e.parent().css("color","#333"):e.css("border-color","#DBD8D1");f||g.push({name:b[j].name,title:b[j].title,value:h})}"function"==typeof d?d(g):a.Log("form submit complete, callback is null",3)}}});a.Transfer=a.Class.create();a.Transfer.prototype={name:"Transfer",button:null,
element:null,form:null,iframe:null,options:null,debug:!0,fkey:"",initialize:function(b,d){this.button=d;var c=a.randomChar(16);this.options=a.extend({onError:new Function,onChange:new Function,callback:new Function,name:c,maxSize:2465792,accept:"*",params:{},target:"iframe-transfer-"+c},b);if(this.options.server){var e=this,c=Math.max(20,this.button.width(),parseFloat(this.button.css("width"))),f=Math.max(20,this.button.height(),parseFloat(this.button.css("height"))),c=a.STYLE_BODY+"width:"+c+"px;height:"+
f+"px;overflow:hidden;",g=function(a){/^(?:loaded|complete|undefined)$/.test(this.readyState)&&(e.iframe.removeEvent("readystatechange",g).removeEvent("load",g),e.transferComplete(a,e.fkey))};this.form=a({tag:"FORM",action:"",method:"POST",target:this.options.target,enctype:"multipart/form-data",style:c}).appendTo(this.button,!0);this.iframe=a({tag:"IFRAME",name:this.options.target,src:"about:blank",style:c+"width:0;height:0;display:none;"}).appendTo(this.button,!0);this.element=a({tag:"INPUT",type:"file",
name:this.options.name,accept:this.options.accept,style:c,title:this.button.attr("title")||""}).appendTo(this.form,!0).css("opacity",0);this.element.click(function(){""!==this.value&&e.form.get(0).reset();e.iframe.bind("readystatechange",g).bind("load",g);e.fkey=a.randomChar(16)}).bind("change",function(a){e.fileChange(a,this.files||this.value)})}else a.Log("server is null",3)},transferComplete:function(b,d){var c=this;d&&(this.debug&&a.Log("$.upload.transferComplete(event, "+d+")"),a.jsonp(this.options.server+
"?"+a.toURI(a.extend({getaction:1,fkey:d},this.options.params))+"#rnd",function(b){c.debug&&a.Log("get transfer file info:"+a.JSON.toJSONString(b),1);c.options.callback(b)}))},fileChange:function(b,d){if("string"===typeof d)this.debug&&a.Log("Name: "+d,2);else for(var c,e=0;e<d.length;e++){var f=d[e];if(f.size>this.options.maxSize){this.options.onError(f.name,"SIZE");return}if("*"!=this.options.accept&&this.options.accept){if(-1<this.options.accept.indexOf("/*")){if(c=RegExp(this.options.accept.replace(/\//,
"\\/"),"gi"),c.test(f.type)){a.Log("accept:"+this.options.accept+", type:"+f.type,2);this.options.onError(f.name,"TYPE");continue}}else if(-1>=this.options.accept.indexOf(f.type)){a.Log("accept:"+this.options.accept+", type:"+f.type,2);this.options.onError(f.name,"TYPE");continue}this.debug&&a.Log("Name: "+f.name)}}this.options.onChange();this.debug&&a.Log("$.upload.fileChange()");this.form.attr("action",this.options.server+"?"+a.toURI(a.extend({fkey:this.fkey},this.options.params)));this.form.get(0).submit()}}}})(nTalk);
